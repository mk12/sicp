\startenvironment proof-style

% Modules
\usemodule[math]

% Layout
\setuppapersize[letter]
\setupindenting[yes,medium,next]
\setupwhitespace[none]
\setuppagenumbering[location={footer,middle}]
\setuplayout[width=5.5in,backspace=1.5in]

% Font
\setupbodyfont[12pt]
\definefontfeature[default][default][expansion=quality,protrusion=quality]
\usetypescript[modern-base]
\setupbodyfont[reset,modern]
\setupalign[hz,hanging]

% Title
\define[3]\maketitle{%
	\startalignment[center]
	\blank[force,2*big]
	{\tfc #1}
	\blank[3*medium]
	{\tfa #2}
	\blank[2*medium]
	{\tfa #3}
	\blank[2*big]
	\stopalignment}

% Semantics
\setupbodyfontenvironment[default][em=italic]
\define\work\emph
\define\code\mono
\define[1]\acronym{{\setcharactercasing[word]\sc#1}}
\definehead[exercise][subject]
\setuphead[exercise][style=\bfa]
\defineblank[blocksep][line]
\definestartstop[problem][
	before={\blank[blocksep]\startnarrower\noindent},
	after={\stopnarrower\blank[blocksep]\noindent}]
\defineenumeration[theorem][
	headstyle=\bf,text={Theorem},alternative=serried,stopper={.},
	distance=1ex,width=fit]
\defineenumeration[lemma][
	headstyle=\bf,text={Lemma},alternative=serried,stopper={.},
	distance=1ex,width=fit]
\definestartstop[proof][
	before={\blank[blocksep]\noindent\italic{Proof.}\space},
	after={\hfill\square\par\blank[blocksep]}]

% Math
\setupformulas[indentnext=auto]
\define[1]\abs{\left\lvert#1\right\rvert}
\definemathcommand[Fib]{\mfunction{Fib}}

\stopenvironment
