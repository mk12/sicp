<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Mitchell Kember">
  <title>SICP Lecture 1B Notes</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
   var mathElements = document.getElementsByClassName("math");
   var macros = [];
   for (var i = 0; i < mathElements.length; i++) {
    var texText = mathElements[i].firstChild;
    if (mathElements[i].tagName == "SPAN") {
     katex.render(texText.data, mathElements[i], {
      displayMode: mathElements[i].classList.contains('display'),
      throwOnError: false,
      macros: macros,
      fleqn: false
     });
  }}});
  </script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" />
  <link rel="stylesheet" href="../assets/style.css">
</head>
<body>
<header class="header">
  <a class="title" href="../index.html">SICP Study</a>
  <span class="gap"></span>
  <nav class="sitenav">
    <a class="sitenav__item" href="../text/index.html">Text</a>
    <a class="sitenav__item sitenav__item--active" href="../lecture/index.html">Lecture</a>
    <a class="sitenav__item" href="../exercise/index.html">Exercise</a>
    <a class="sitenav__item" href="https://github.com/mk12/sicp">Source <svg class="github-mark" width="25" height="25" viewBox="0 0 136 133" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g transform="matrix(1,0,0,1,-568.001,-447.669)">
      <g transform="matrix(4.16667,0,0,4.16667,0,0)">
          <g transform="matrix(1,0,0,1,152.608,139.345)">
              <path d="M0,-31.904C-8.995,-31.904 -16.288,-24.611 -16.288,-15.614C-16.288,-8.417 -11.621,-2.312 -5.148,-0.157C-4.333,-0.008 -4.036,-0.511 -4.036,-0.943C-4.036,-1.329 -4.05,-2.354 -4.058,-3.713C-8.589,-2.729 -9.545,-5.897 -9.545,-5.897C-10.286,-7.778 -11.354,-8.279 -11.354,-8.279C-12.833,-9.29 -11.242,-9.27 -11.242,-9.27C-9.607,-9.154 -8.747,-7.591 -8.747,-7.591C-7.294,-5.102 -4.934,-5.821 -4.006,-6.237C-3.858,-7.29 -3.438,-8.008 -2.972,-8.415C-6.589,-8.826 -10.392,-10.224 -10.392,-16.466C-10.392,-18.244 -9.757,-19.698 -8.715,-20.837C-8.883,-21.249 -9.442,-22.905 -8.556,-25.148C-8.556,-25.148 -7.188,-25.586 -4.076,-23.478C-2.777,-23.839 -1.383,-24.02 0.002,-24.026C1.385,-24.02 2.779,-23.839 4.08,-23.478C7.19,-25.586 8.555,-25.148 8.555,-25.148C9.444,-22.905 8.885,-21.249 8.717,-20.837C9.761,-19.698 10.392,-18.244 10.392,-16.466C10.392,-10.208 6.583,-8.831 2.954,-8.428C3.539,-7.925 4.06,-6.931 4.06,-5.411C4.06,-3.234 4.04,-1.477 4.04,-0.943C4.04,-0.507 4.333,0 5.16,-0.159C11.628,-2.318 16.291,-8.419 16.291,-15.614C16.291,-24.611 8.997,-31.904 0,-31.904"/>
          </g>
      </g>
  </g>
</svg></a>
  </nav>
</header>
<nav class="pagenav pagenav--top">
  <div class="pagenav__item pagenav__item--prev"><a class="pagenav__link" href="1a.html">← Prev</a></div>
  <div class="pagenav__item pagenav__item--up"><a class="pagenav__link" href="index.html">↑ Up</a></div>
  <div class="pagenav__item pagenav__item--next"><a class="pagenav__link" href="2a.html">Next →</a></div>
</nav>
<h1>
Procedures and Processes; Substitution Model<small class="number">1B</small>
</h1>
<h2 id="1" class="anchor">
<a class="anchor__link" href="#1">#</a>Part 1
</h2>
<h3 id="1.1" class="anchor">
<a class="anchor__link" href="#1.1">#</a>Programs and processes
</h3>
<ul>
<li>The job of a programmer is to design processes that accomplish particular goals (like finding the square root of a number).</li>
<li>You do this by constructing spells (procedures, expressions) which direct a process to accomplish the desired goal.</li>
<li>You must understand the relationship between the particular spells you cast and the process you’re trying to control.</li>
<li>How do particular patterns of procedures and expressions cause particular patterns of execution and behaviour in the process?</li>
</ul>
<h3 id="1.2" class="anchor">
<a class="anchor__link" href="#1.2">#</a>Kinds of expressions
</h3>
<p>So far we’ve seen three main kinds of expressions:</p>
<ul>
<li>numbers</li>
<li>symbols</li>
<li>combinations</li>
</ul>
<p>These are also expressions, but they are <em>special forms</em>, so we will worry about them later:</p>
<ul>
<li>lambdas</li>
<li>definitions</li>
<li>conditionals</li>
</ul>
<h3 id="1.3" class="anchor">
<a class="anchor__link" href="#1.3">#</a>Evaluating combinations
</h3>
<p>These are the substitution rules for evaluating a combination. Note that the order does not matter for steps 1 and 2.</p>
<ol type="1">
<li>Evaluate the operator to get the procedure.</li>
<li>Evaluate the operands to get the arguments.</li>
<li>Apply the procedure to the arguments.
<ol type="1">
<li>Copy the body of the procedure.</li>
<li>Substitute the arguments supplied for the formal parameters of the procedure.</li>
<li>Evaluate the resulting body.</li>
</ol></li>
</ol>
<h4 id="1.3.1" class="anchor">
<a class="anchor__link" href="#1.3.1">#</a>Example
</h4>
<p>The <code>sos</code> procedure takes the sum of the squares:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>(<span class="ex">define</span><span class="fu"> </span>(sq a) (<span class="op">*</span> a a))</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>(<span class="ex">define</span><span class="fu"> </span>(sos x y) (<span class="op">+</span> (sq x) (sq y)))</span></code></pre></div>
<p>Let’s evaluate the sum of the square of 3 and the square of 4:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>(sos <span class="dv">3</span> <span class="dv">4</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>(<span class="op">+</span> (sq <span class="dv">3</span>) (sq <span class="dv">4</span>))</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>(<span class="op">+</span> (sq <span class="dv">3</span>) (<span class="op">*</span> <span class="dv">4</span> <span class="dv">4</span>))</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>(<span class="op">+</span> (sq <span class="dv">3</span>) <span class="dv">16</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>(<span class="op">+</span> (<span class="op">*</span> <span class="dv">3</span> <span class="dv">3</span>) <span class="dv">16</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>(<span class="op">+</span> <span class="dv">9</span> <span class="dv">16</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="dv">25</span></span></code></pre></div>
<p>This is not a perfect description of what the computer does. But it is a good enough model for now.</p>
<blockquote>
<p>But one of the things he have to learn how to do is to ignore details. The key to understanding complex things is knowing what not to look at, and what not to compute, and what not to think.</p>
</blockquote>
<h3 id="1.4" class="anchor">
<a class="anchor__link" href="#1.4">#</a>Evaluating conditionals
</h3>
<p>To evaluate <code>(if &lt;predicate&gt; &lt;consequent&gt; &lt;alternative&gt;)</code>, follow these steps:</p>
<ol type="1">
<li>Evaluate the predicate expression.
<ol type="1">
<li>If it yields true, evaluate the consequent expression.</li>
<li>If it yields false, evaluate the alternative expression.</li>
</ol></li>
</ol>
<h4 id="1.4.1" class="anchor">
<a class="anchor__link" href="#1.4.1">#</a>Example
</h4>
<p>The addition operator in Peano arithmetic uses a conditional:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>(<span class="ex">define</span><span class="fu"> </span>(<span class="op">+</span> x y)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">if</span> (<span class="op">=</span> x <span class="dv">0</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>      y</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>      (<span class="op">+</span> (-<span class="dv">1</span>+ x) (<span class="dv">1</span>+ y))))</span></code></pre></div>
<p>Now we can evaluate <code>(+ 3 4)</code> like so:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>(<span class="op">+</span> <span class="dv">3</span> <span class="dv">4</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>(<span class="kw">if</span> (<span class="op">=</span> <span class="dv">3</span> <span class="dv">0</span>) <span class="dv">4</span> (<span class="op">+</span> (-<span class="dv">1</span>+ <span class="dv">3</span>) (<span class="dv">1</span>+ <span class="dv">4</span>)))</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>(<span class="op">+</span> (-<span class="dv">1</span>+ <span class="dv">3</span>) (<span class="dv">1</span>+ <span class="dv">4</span>))</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>(<span class="op">+</span> (-<span class="dv">1</span>+ <span class="dv">3</span>) <span class="dv">5</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>(<span class="op">+</span> <span class="dv">2</span> <span class="dv">5</span>)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>(<span class="kw">if</span> (<span class="op">=</span> <span class="dv">2</span> <span class="dv">0</span>) <span class="dv">5</span> (<span class="op">+</span> (-<span class="dv">1</span>+ <span class="dv">2</span>) (<span class="dv">1</span>+ <span class="dv">5</span>)))</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>(<span class="op">+</span> (-<span class="dv">1</span>+ <span class="dv">2</span>) (<span class="dv">1</span>+ <span class="dv">5</span>))</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>(<span class="op">+</span> (-<span class="dv">1</span>+ <span class="dv">2</span>) <span class="dv">6</span>)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>(<span class="op">+</span> <span class="dv">1</span> <span class="dv">6</span>)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>(<span class="kw">if</span> (<span class="op">=</span> <span class="dv">1</span> <span class="dv">0</span>) <span class="dv">6</span> (<span class="op">+</span> (-<span class="dv">1</span>+ <span class="dv">1</span>) (<span class="dv">1</span>+ <span class="dv">6</span>)))</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>(<span class="op">+</span> (-<span class="dv">1</span>+ <span class="dv">1</span>) (<span class="dv">1</span>+ <span class="dv">6</span>))</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>(<span class="op">+</span> (-<span class="dv">1</span>+ <span class="dv">1</span>) <span class="dv">7</span>)</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>(<span class="op">+</span> <span class="dv">0</span> <span class="dv">7</span>)</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>(<span class="kw">if</span> (<span class="op">=</span> <span class="dv">0</span> <span class="dv">0</span>) <span class="dv">7</span> (<span class="op">+</span> (-<span class="dv">1</span>+ <span class="dv">0</span>) (<span class="dv">1</span>+ <span class="dv">7</span>)))</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span></span></code></pre></div>
<h2 id="2" class="anchor">
<a class="anchor__link" href="#2">#</a>Part 2
</h2>
<h3 id="2.1" class="anchor">
<a class="anchor__link" href="#2.1">#</a>Pre-visualization
</h3>
<ul>
<li>A program made of procedures and expression evolves a process.</li>
<li>But how do particular programs evolve particle processes?</li>
<li>We want to be able to go from particularly shaped programs to particularly shaped processes.</li>
<li>We want to pre-visualize the process like a photographer pre-visualizes the photo before taking the shot.</li>
</ul>
<h3 id="2.2" class="anchor">
<a class="anchor__link" href="#2.2">#</a>Peano arithmetic
</h3>
<p>There are two ways to add whole numbers in Peano arithmetic.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>(<span class="ex">define</span><span class="fu"> </span>(<span class="op">+</span> x y)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">if</span> (<span class="op">=</span> x <span class="dv">0</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>      y</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>      (<span class="op">+</span> (-<span class="dv">1</span>+ x) (<span class="dv">1</span>+ y))))</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>(<span class="ex">define</span><span class="fu"> </span>(<span class="op">+</span> x y)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">if</span> (<span class="op">=</span> x <span class="dv">0</span>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>      y</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>      (<span class="dv">1</span>+ (<span class="op">+</span> (-<span class="dv">1</span>+ x) y))))</span></code></pre></div>
<p>Both are written using recursion, but they are different: the first generates a <em>linear iterative</em> process with <span class="math inline">Θ(n)</span> time and <span class="math inline">Θ(n)</span> space; the second generates a <em>linear recursive</em> process with <span class="math inline">Θ(n)</span> time and <span class="math inline">Θ(1)</span> space.</p>
<p>The iteration has all of its state in explicit variables. The recursion does not.</p>
<h2 id="3" class="anchor">
<a class="anchor__link" href="#3">#</a>Part 3
</h2>
<h3 id="3.1" class="anchor">
<a class="anchor__link" href="#3.1">#</a>Perturbation analysis
</h3>
<p>Make small changes to the program, see how it affects the process.</p>
<h3 id="3.2" class="anchor">
<a class="anchor__link" href="#3.2">#</a>Fibonacci sequence
</h3>
<p>We can represent the Fibonacci numbers 0, 1, 1, 2, 3, 5, 8, 13, 21, … in Lisp:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>(<span class="ex">define</span><span class="fu"> </span>(fib n)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">if</span> (<span class="op">&lt;</span> n <span class="dv">2</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>      n</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>      (<span class="op">+</span> (fib (<span class="op">-</span> n <span class="dv">1</span>))</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>         (fib (<span class="op">-</span> n <span class="dv">2</span>)))))</span></code></pre></div>
<p>This is a <em>tree-recursive</em> process. We can represent the evaluation with a tree. This is a terribly inefficient process because their is so much redundant computation. The time complexity of this is actually the Fibonacci numbers. The space complexity is linear.</p>
<blockquote>
<p>The reason why people think programming is hard is because you’re writing down a general rule which is going to be used for lots of instances – it’s going to control all of those instances.</p>
</blockquote>
<h3 id="3.3" class="anchor">
<a class="anchor__link" href="#3.3">#</a>Tower of Hanoi
</h3>
<blockquote>
<p>The way in which you construct a recursive process is by wishful thinking. You have to believe.</p>
</blockquote>
<p>Move an n-high tower from spike <code>from</code> to spike <code>to</code> using spike <code>spare</code> as a spare:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>(<span class="ex">define</span><span class="fu"> </span>(move n from to spare)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">cond</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    ((<span class="op">=</span> n <span class="dv">0</span>) <span class="st">&quot;DONE&quot;</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">else</span> (move (-<span class="dv">1</span>+ n) from spare to)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>          (print-move from to)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>          (move (-<span class="dv">1</span>+m) spare to from))))</span></code></pre></div>
<nav class="pagenav pagenav--bottom">
  <div class="pagenav__item pagenav__item--prev"><a class="pagenav__link" href="1a.html">← Prev</a></div>
  <div class="pagenav__item pagenav__item--up"><a class="pagenav__link" href="index.html">↑ Up</a></div>
  <div class="pagenav__item pagenav__item--next"><a class="pagenav__link" href="2a.html">Next →</a></div>
</nav>
<footer class="footer">© 2020 Mitchell Kember</footer>
</body>
</html>
