<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SICP Lecture 1B Notes</title>
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css">
  <link rel="stylesheet" href="../style.css">
</head>
<body>
<div hidden>
  <svg>
    <symbol id="up" viewBox="0 0 11 12">
      <path fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" d="M5.5.8v10.4m4.457-5.943L5.5.8 1.043 5.257"/>
    </symbol>
    <symbol id="left" viewBox="0 0 12 11">
      <path fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" d="M.8 5.5h10.4M5.257 9.957L.8 5.5l4.457-4.457"/>
    </symbol>
    <symbol id="right" viewBox="0 0 12 11">
      <use xlink:href="#left" transform="matrix(-1 0 0 1 12 0)"/>
    </symbol>
    <symbol id="external" viewBox="0 0 24 24">
      <path fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" d="M10.688 5.438H4.125A2.65 2.65 0 001.5 8.063v11.812A2.65 2.65 0 004.125 22.5h11.813a2.65 2.65 0 002.624-2.625v-6.563m-9.187 1.313L22.5 1.5m-6.563 0H22.5v6.563"/>
    </symbol>
    <symbol id="circle-left" viewBox="0 0 18 18" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="9" stroke-width="1.69" transform="matrix(.8889 0 0 .8889 -1.667 -1.667)"/>
      <path stroke-width="1.5" d="M5.229 9h7.542M9 5.229L5.229 9 9 12.771"/>
    </symbol>
  </svg>
</div>
<a class="skip-link" href="#main">Skip to main content</a>
<header class="header">
  <a class="title link" href="../index.html">SICP Study</a>
  <nav class="sitenav" aria-label="site">
    <a class="sitenav__item link"
        href="../text/index.html" aria-label="textbook notes">Text</a>
    <a class="sitenav__item sitenav__item--active link"
        href="../lecture/index.html" aria-label="lecture notes">Lecture</a>
    <a class="sitenav__item link"
        href="../exercise/index.html" aria-label="exercises">Exercise</a>
    <a class="sitenav__item sitenav__item--last link"
        href="https://github.com/mk12/sicp" aria-label="GitHub repository">
      Source
      <svg class="github-mark" width="25" height="25" viewBox="0 0 136 133" aria-hidden="true">
        <path fill="currentColor" d="M67.866.002C30.387.002 0 30.39 0 67.877c0 29.988 19.446 55.425 46.417 64.404 3.396.621 4.633-1.475 4.633-3.275 0-1.608-.058-5.879-.091-11.541-18.88 4.1-22.863-9.1-22.863-9.1-3.087-7.838-7.537-9.925-7.537-9.925-6.163-4.213.466-4.13.466-4.13 6.813.484 10.396 6.996 10.396 6.996 6.054 10.371 15.888 7.375 19.754 5.642.617-4.387 2.367-7.38 4.309-9.075-15.071-1.712-30.917-7.537-30.917-33.546 0-7.408 2.646-13.466 6.988-18.212-.7-1.717-3.03-8.617.662-17.963 0 0 5.7-1.825 18.667 6.959 5.412-1.505 11.22-2.259 16.992-2.284 5.762.025 11.57.78 16.991 2.284 12.959-8.784 18.646-6.959 18.646-6.959 3.704 9.346 1.375 16.246.675 17.963 4.35 4.746 6.98 10.804 6.98 18.212 0 26.075-15.872 31.813-30.992 33.492 2.437 2.096 4.608 6.237 4.608 12.57 0 9.072-.083 16.392-.083 18.617 0 1.817 1.22 3.93 4.666 3.267 26.95-8.996 46.38-34.417 46.38-64.396 0-37.487-30.392-67.875-67.88-67.875"/>
      </svg>      
    </a>
  </nav>
</header>
<nav class="pagenav pagenav--top" aria-label="page">
  <div class="pagenav__item pagenav__item--left">
    <a class="pagenav__link link" href="1a.html" aria-label="previous page">
      <svg width="12" height="11" aria-hidden="true"><use xlink:href="#left"/>
      </svg><span class="pagenav__prev">Prev</span>
    </a>
  </div>
  <div class="pagenav__item pagenav__item--center">
    <a class="pagenav__link link" href="index.html" aria-label="parent page">
      <svg width="11" height="12" aria-hidden="true"><use xlink:href="#up"/>
      </svg><span class="pagenav__up">Up</span>
    </a>
  </div>
  <div class="pagenav__item pagenav__item--right">
    <a class="pagenav__link link" href="2a.html" aria-label="next page">
      <span class="pagenav__next">Next</span
        ><svg width="12" height="11" aria-hidden="true"
        ><use xlink:href="#right"/></svg>
    </a>
  </div>
</nav>
<main id="main">
<h1>
<span class="number">1B</span> <a class="link" href="https://ocw.mit.edu/courses/6-001-structure-and-interpretation-of-computer-programs-spring-2005/1b-procedures-and-processes-substitution-model">Procedures and Processes; Substitution Model<span class="nowrap">﻿<svg class="external" width="24" height="24" aria-hidden="true"><use xlink:href="#external"/></svg></span></a>
</h1>
<h2 id="1" class="anchor">
<a class="anchor__link link" href="#1" aria-hidden="true">#</a> Part 1
</h2>
<h3 id="1.1" class="anchor">
<a class="anchor__link link" href="#1.1" aria-hidden="true">#</a> Programs and processes
</h3>
<ul>
<li>The job of a programmer is to design processes that accomplish particular goals, like finding the square root of a number.</li>
<li>You do this by constructing spells (procedures, expressions) which direct a process to accomplish the desired goal.</li>
<li>You must understand the relationship between the particular spells you cast and the process you’re trying to control.</li>
<li>How do particular patterns of procedures and expressions cause particular patterns of execution and behavior in the process?</li>
</ul>
<h3 id="1.2" class="anchor">
<a class="anchor__link link" href="#1.2" aria-hidden="true">#</a> Kinds of expressions
</h3>
<p>So far we’ve seen three main kinds of expressions:</p>
<ul>
<li>numbers</li>
<li>symbols</li>
<li>combinations</li>
</ul>
<p>These are also expressions, but they are <em>special forms</em>, so we will worry about them later:</p>
<ul>
<li>lambdas</li>
<li>definitions</li>
<li>conditionals</li>
</ul>
<h3 id="1.3" class="anchor">
<a class="anchor__link link" href="#1.3" aria-hidden="true">#</a> Evaluating combinations
</h3>
<p>These are the substitution rules for evaluating a combination:</p>
<ol type="1">
<li>Evaluate the operator to get the procedure.</li>
<li>Evaluate the operands to get the arguments.</li>
<li>Apply the procedure to the arguments.
<ol type="1">
<li>Copy the body of the procedure.</li>
<li>Substitute the arguments supplied for the formal parameters of the procedure.</li>
<li>Evaluate the resulting body.</li>
</ol></li>
</ol>
<h3 id="1.4" class="anchor">
<a class="anchor__link link" href="#1.4" aria-hidden="true">#</a> Example
</h3>
<p>The <code>sos</code> procedure takes the sum of the squares:</p>
<pre><code class="blockcode">(<span class="kw">define</span> (sq a) (<span class="fu">*</span> a a))
(<span class="kw">define</span> (sos x y) (<span class="fu">+</span> (sq x) (sq y)))</code></pre>
<p>Let’s evaluate the sum of the square of 3 and the square of 4:</p>
<pre><code class="blockcode">(sos <span class="cn">3</span> <span class="cn">4</span>)
(<span class="fu">+</span> (sq <span class="cn">3</span>) (sq <span class="cn">4</span>))
(<span class="fu">+</span> (sq <span class="cn">3</span>) (<span class="fu">*</span> <span class="cn">4</span> <span class="cn">4</span>))
(<span class="fu">+</span> (sq <span class="cn">3</span>) <span class="cn">16</span>)
(<span class="fu">+</span> (<span class="fu">*</span> <span class="cn">3</span> <span class="cn">3</span>) <span class="cn">16</span>)
(<span class="fu">+</span> <span class="cn">9</span> <span class="cn">16</span>)
<span class="cn">25</span></code></pre>
<p>This is not a perfect description of what the computer does. But it is a good enough model for now.</p>
<div id="q1" class="highlight">
<a class="highlight__link link" href="highlight.html#1b-q1" aria-label="view quote in highlights page"><svg class="circle-arrow" width="18" height="18" aria-hidden="true"><use xlink:href="#circle-left"/></svg> Highlights</a>
<blockquote>
<p>But one of the things we have to learn how to do is ignore details. The key to understanding complicated things is to know what not to look at, and what not compute, and what not to think. <span class="citation">—<a href="https://ocw.mit.edu/courses/6-001-structure-and-interpretation-of-computer-programs-spring-2005/c4d1f16f3b0cb1e702defba51ba0f9ed_V_7mmwpgJHU.pdf#page=3" title="SICP Lecture 1B transcript, page 3">Sussman</a></span></p>
</blockquote>
</div>
<h3 id="1.5" class="anchor">
<a class="anchor__link link" href="#1.5" aria-hidden="true">#</a> Evaluating conditionals
</h3>
<p>To evaluate <code>(<span class="kw">if</span> <span class="ss">predicate</span> <span class="ss">consequent</span> <span class="ss">alternative</span>)</code>, follow these steps:</p>
<ol type="1">
<li>Evaluate the predicate expression.
<ol type="1">
<li>If it yields true, evaluate the consequent expression.</li>
<li>If it yields false, evaluate the alternative expression.</li>
</ol></li>
</ol>
<h3 id="1.6" class="anchor">
<a class="anchor__link link" href="#1.6" aria-hidden="true">#</a> Example
</h3>
<p>The addition operator in Peano arithmetic uses a conditional:</p>
<pre><code class="blockcode">(<span class="kw">define</span> (<span class="fu">+</span> x y)
  (<span class="kw">if</span> (<span class="fu">=</span> x <span class="cn">0</span>)
      y
      (<span class="fu">+</span> (<span class="fu">-1+</span> x) (<span class="fu">1+</span> y))))</code></pre>
<p>Now we can evaluate <code>(<span class="fu">+</span> <span class="cn">3</span> <span class="cn">4</span>)</code> like so:</p>
<pre><code class="blockcode">(<span class="fu">+</span> <span class="cn">3</span> <span class="cn">4</span>)
(<span class="kw">if</span> (<span class="fu">=</span> <span class="cn">3</span> <span class="cn">0</span>) <span class="cn">4</span> (<span class="fu">+</span> (<span class="fu">-1+</span> <span class="cn">3</span>) (<span class="fu">1+</span> <span class="cn">4</span>)))
(<span class="fu">+</span> (<span class="fu">-1+</span> <span class="cn">3</span>) (<span class="fu">1+</span> <span class="cn">4</span>))
(<span class="fu">+</span> (<span class="fu">-1+</span> <span class="cn">3</span>) <span class="cn">5</span>)
(<span class="fu">+</span> <span class="cn">2</span> <span class="cn">5</span>)
(<span class="kw">if</span> (<span class="fu">=</span> <span class="cn">2</span> <span class="cn">0</span>) <span class="cn">5</span> (<span class="fu">+</span> (<span class="fu">-1+</span> <span class="cn">2</span>) (<span class="fu">1+</span> <span class="cn">5</span>)))
(<span class="fu">+</span> (<span class="fu">-1+</span> <span class="cn">2</span>) (<span class="fu">1+</span> <span class="cn">5</span>))
(<span class="fu">+</span> (<span class="fu">-1+</span> <span class="cn">2</span>) <span class="cn">6</span>)
(<span class="fu">+</span> <span class="cn">1</span> <span class="cn">6</span>)
(<span class="kw">if</span> (<span class="fu">=</span> <span class="cn">1</span> <span class="cn">0</span>) <span class="cn">6</span> (<span class="fu">+</span> (<span class="fu">-1+</span> <span class="cn">1</span>) (<span class="fu">1+</span> <span class="cn">6</span>)))
(<span class="fu">+</span> (<span class="fu">-1+</span> <span class="cn">1</span>) (<span class="fu">1+</span> <span class="cn">6</span>))
(<span class="fu">+</span> (<span class="fu">-1+</span> <span class="cn">1</span>) <span class="cn">7</span>)
(<span class="fu">+</span> <span class="cn">0</span> <span class="cn">7</span>)
(<span class="kw">if</span> (<span class="fu">=</span> <span class="cn">0</span> <span class="cn">0</span>) <span class="cn">7</span> (<span class="fu">+</span> (<span class="fu">-1+</span> <span class="cn">0</span>) (<span class="fu">1+</span> <span class="cn">7</span>)))
<span class="cn">7</span></code></pre>
<h2 id="2" class="anchor">
<a class="anchor__link link" href="#2" aria-hidden="true">#</a> Part 2
</h2>
<h3 id="2.1" class="anchor">
<a class="anchor__link link" href="#2.1" aria-hidden="true">#</a> Pre-visualization
</h3>
<ul>
<li>Programs are made of procedures and expressions, and they evolves processes.</li>
<li>But how do particular programs evolve particle processes?</li>
<li>We want to go from particularly shaped programs to particularly shaped processes.</li>
<li>We want to pre-visualize the process like a photographer pre-visualizes the photo before taking the shot.</li>
</ul>
<h3 id="2.2" class="anchor">
<a class="anchor__link link" href="#2.2" aria-hidden="true">#</a> Peano arithmetic
</h3>
<p>There are two ways to add whole numbers in Peano arithmetic.</p>
<pre><code class="blockcode">(<span class="kw">define</span> (<span class="fu">+</span> x y)
  (<span class="kw">if</span> (<span class="fu">=</span> x <span class="cn">0</span>)
      y
      (<span class="fu">+</span> (<span class="fu">-1+</span> x) (<span class="fu">1+</span> y))))
(<span class="kw">define</span> (<span class="fu">+</span> x y)
  (<span class="kw">if</span> (<span class="fu">=</span> x <span class="cn">0</span>)
      y
      (<span class="fu">1+</span> (<span class="fu">+</span> (<span class="fu">-1+</span> x) y))))</code></pre>
<p>Both are written using recursion, but they are different: the first generates a <em>linear iterative</em> process with <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Θ</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Θ(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Θ</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> time and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Θ</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Θ(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Θ</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> space; the second generates a <em>linear recursive</em> process with <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Θ</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Θ(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Θ</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> time and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Θ</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Θ(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Θ</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> space.</p>
<p>The iteration has all of its state in explicit variables. The recursion does not.</p>
<h2 id="3" class="anchor">
<a class="anchor__link link" href="#3" aria-hidden="true">#</a> Part 3
</h2>
<h3 id="3.1" class="anchor">
<a class="anchor__link link" href="#3.1" aria-hidden="true">#</a> Perturbation analysis
</h3>
<p>Make small changes to the program and see how it affects the process.</p>
<h3 id="3.2" class="anchor">
<a class="anchor__link link" href="#3.2" aria-hidden="true">#</a> Fibonacci sequence
</h3>
<p>We can represent the Fibonacci numbers 0, 1, 1, 2, 3, 5, 8, 13, 21, … in Lisp:</p>
<pre><code class="blockcode">(<span class="kw">define</span> (fib n)
  (<span class="kw">if</span> (<span class="fu">&lt;</span> n <span class="cn">2</span>)
      n
      (<span class="fu">+</span> (fib (<span class="fu">-</span> n <span class="cn">1</span>))
         (fib (<span class="fu">-</span> n <span class="cn">2</span>)))))</code></pre>
<p>This is a <em>tree-recursive</em> process. We can represent the evaluation with a tree. This is a terribly inefficient process because there is so much redundant computation. The time complexity of this is actually the Fibonacci numbers. The space complexity is linear.</p>
<blockquote>
<p>And the reason why people think of programming as being hard, of course, is because you’re writing down a general rule, which is going to be used for lots of instances … You’ve got to write down something that’s a general in terms of variables, and you have to think of all the things that could possibly fit in those variables, and all those have to lead to the process you want to work. <span class="citation">—<a href="https://ocw.mit.edu/courses/6-001-structure-and-interpretation-of-computer-programs-spring-2005/c4d1f16f3b0cb1e702defba51ba0f9ed_V_7mmwpgJHU.pdf#page=13" title="SICP Lecture 1B transcript, page 13">Sussman</a></span></p>
</blockquote>
<h3 id="3.3" class="anchor">
<a class="anchor__link link" href="#3.3" aria-hidden="true">#</a> Tower of Hanoi
</h3>
<div id="q2" class="highlight">
<a class="highlight__link link" href="highlight.html#1b-q2" aria-label="view quote in highlights page"><svg class="circle-arrow" width="18" height="18" aria-hidden="true"><use xlink:href="#circle-left"/></svg> Highlights</a>
<blockquote>
<p>The way in which you would construct a recursive process is by wishful thinking. You have to believe. <span class="citation">—<a href="https://ocw.mit.edu/courses/6-001-structure-and-interpretation-of-computer-programs-spring-2005/c4d1f16f3b0cb1e702defba51ba0f9ed_V_7mmwpgJHU.pdf#page=13" title="SICP Lecture 1B transcript, page 13">Sussman</a></span></p>
</blockquote>
</div>
<p>Move an <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span>-high tower from spike <code>from</code> to spike <code>to</code> using spike <code>spare</code> as a spare:</p>
<pre><code class="blockcode">(<span class="kw">define</span> (move n from to spare)
  (<span class="kw">cond</span>
    ((<span class="fu">=</span> n <span class="cn">0</span>) <span class="cn">&quot;DONE&quot;</span>)
    (<span class="kw">else</span> (move (<span class="fu">-1+</span> n) from spare to)
          (print-move from to)
          (move (<span class="fu">-1+</span> m) spare to from))))</code></pre>
</main>
<nav class="pagenav pagenav--bottom" aria-label="page">
  <div class="pagenav__item pagenav__item--left">
    <a class="pagenav__link link" href="1a.html" aria-label="previous page">
      <svg width="12" height="11" aria-hidden="true"><use xlink:href="#left"/>
      </svg><span class="pagenav__prev">Prev</span>
    </a>
  </div>
  <div class="pagenav__item pagenav__item--center">
    <a class="pagenav__link link" href="index.html" aria-label="parent page">
      <svg width="11" height="12" aria-hidden="true"><use xlink:href="#up"/>
      </svg><span class="pagenav__up">Up</span>
    </a>
  </div>
  <div class="pagenav__item pagenav__item--right">
    <a class="pagenav__link link" href="2a.html" aria-label="next page">
      <span class="pagenav__next">Next</span
        ><svg width="12" height="11" aria-hidden="true"
        ><use xlink:href="#right"/></svg>
    </a>
  </div>
</nav>
<footer class="footer">
  <p>© 2021 Mitchell Kember</p>
</footer>
</body>
</html>
