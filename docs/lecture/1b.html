<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Mitchell Kember">
  <title>SICP Lecture 1B Notes</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
   var mathElements = document.getElementsByClassName("math");
   var macros = [];
   for (var i = 0; i < mathElements.length; i++) {
    var texText = mathElements[i].firstChild;
    if (mathElements[i].tagName == "SPAN") {
     katex.render(texText.data, mathElements[i], {
      displayMode: mathElements[i].classList.contains('display'),
      throwOnError: false,
      macros: macros,
      fleqn: false
     });
  }}});
  </script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" />
  <link rel="stylesheet" href="../assets/style.css">
</head>
<body>
<header class="header ">
  <a class="title link" href="../index.html">SICP Study</a>
  <nav class="sitenav" aria-label="primary">
    <a class="sitenav__item link "
      href="../text/index.html">Text</a>
    <a class="sitenav__item link  sitenav__item--active"
      href="../lecture/index.html">Lecture</a>
    <a class="sitenav__item link "
      href="../exercise/index.html">Exercise</a>
    <a class="sitenav__item sitenav__item--last link"
      href="https://github.com/mk12/sicp">Source
      <svg alt="GitHub Mark" class="github-mark" width="25" height="25" viewBox="0 0 136 133">
        <path d="M67.866.002C30.387.002 0 30.39 0 67.877c0 29.988 19.446 55.425 46.417 64.404 3.396.621 4.633-1.475 4.633-3.275 0-1.608-.058-5.879-.091-11.541-18.88 4.1-22.863-9.1-22.863-9.1-3.087-7.838-7.537-9.925-7.537-9.925-6.163-4.213.466-4.13.466-4.13 6.813.484 10.396 6.996 10.396 6.996 6.054 10.371 15.888 7.375 19.754 5.642.617-4.387 2.367-7.38 4.309-9.075-15.071-1.712-30.917-7.537-30.917-33.546 0-7.408 2.646-13.466 6.988-18.212-.7-1.717-3.03-8.617.662-17.963 0 0 5.7-1.825 18.667 6.959 5.412-1.505 11.22-2.259 16.992-2.284 5.762.025 11.57.78 16.991 2.284 12.959-8.784 18.646-6.959 18.646-6.959 3.704 9.346 1.375 16.246.675 17.963 4.35 4.746 6.98 10.804 6.98 18.212 0 26.075-15.872 31.813-30.992 33.492 2.437 2.096 4.608 6.237 4.608 12.57 0 9.072-.083 16.392-.083 18.617 0 1.817 1.22 3.93 4.666 3.267 26.95-8.996 46.38-34.417 46.38-64.396 0-37.487-30.392-67.875-67.88-67.875"/>
      </svg>
    </a>
  </nav>
</header>
<nav class="pagenav pagenav--top" aria-label="secondary">
  <div class="pagenav__item pagenav__item--prev">
    <a class="pagenav__link link" href="1a.html">
      <svg alt="" class="arrow" width="18" height="18" viewBox="0 0 24 24">
    <path d="M5 12h14M5 12l6 6M5 12l6-6"/>
  </svg> Prev
    </a>
  </div>
  <div class="pagenav__item pagenav__item--up">
    <a class="pagenav__link link" href="index.html"><svg alt="" class="arrow" width="18" height="18" viewBox="0 0 24 24">
    <path d="M12 5v14M18 11l-6-6M6 11l6-6"/>
  </svg> Up</a>
  </div>
  <div class="pagenav__item pagenav__item--next">
    <a class="pagenav__link link" href="2a.html">
      Next <svg alt="" class="arrow" width="18" height="18" viewBox="0 0 24 24">
    <path d="M5 12h14M13 18l6-6M13 6l6 6"/>
  </svg>
    </a>
  </div>
  </nav>
<main>

<h1>
<small class="number">1B</small>Procedures and Processes; Substitution Model
</h1>
<h2 id="1" class="anchor">
<a class="anchor__link link" href="#1">#</a>Part 1
</h2>
<h3 id="1.1" class="anchor">
<a class="anchor__link link" href="#1.1">#</a>Programs and processes
</h3>
<ul>
<li>The job of a programmer is to design processes that accomplish particular goals (like finding the square root of a number).</li>
<li>You do this by constructing spells (procedures, expressions) which direct a process to accomplish the desired goal.</li>
<li>You must understand the relationship between the particular spells you cast and the process you’re trying to control.</li>
<li>How do particular patterns of procedures and expressions cause particular patterns of execution and behaviour in the process?</li>
</ul>
<h3 id="1.2" class="anchor">
<a class="anchor__link link" href="#1.2">#</a>Kinds of expressions
</h3>
<p>So far we’ve seen three main kinds of expressions:</p>
<ul>
<li>numbers</li>
<li>symbols</li>
<li>combinations</li>
</ul>
<p>These are also expressions, but they are <em>special forms</em>, so we will worry about them later:</p>
<ul>
<li>lambdas</li>
<li>definitions</li>
<li>conditionals</li>
</ul>
<h3 id="1.3" class="anchor">
<a class="anchor__link link" href="#1.3">#</a>Evaluating combinations
</h3>
<p>These are the substitution rules for evaluating a combination. Note that the order does not matter for steps 1 and 2.</p>
<ol type="1">
<li>Evaluate the operator to get the procedure.</li>
<li>Evaluate the operands to get the arguments.</li>
<li>Apply the procedure to the arguments.
<ol type="1">
<li>Copy the body of the procedure.</li>
<li>Substitute the arguments supplied for the formal parameters of the procedure.</li>
<li>Evaluate the resulting body.</li>
</ol></li>
</ol>
<h4 id="1.3.1" class="anchor">
<a class="anchor__link link" href="#1.3.1">#</a>Example
</h4>
<p>The <code>sos</code> procedure takes the sum of the squares:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">define</span> (sq a) (<span class="fu">*</span> a a))</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>(<span class="kw">define</span> (sos x y) (<span class="fu">+</span> (sq x) (sq y)))</span></code></pre></div>
<p>Let’s evaluate the sum of the square of 3 and the square of 4:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>(sos <span class="cn">3</span> <span class="cn">4</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>(<span class="fu">+</span> (sq <span class="cn">3</span>) (sq <span class="cn">4</span>))</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>(<span class="fu">+</span> (sq <span class="cn">3</span>) (<span class="fu">*</span> <span class="cn">4</span> <span class="cn">4</span>))</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>(<span class="fu">+</span> (sq <span class="cn">3</span>) <span class="cn">16</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>(<span class="fu">+</span> (<span class="fu">*</span> <span class="cn">3</span> <span class="cn">3</span>) <span class="cn">16</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>(<span class="fu">+</span> <span class="cn">9</span> <span class="cn">16</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="cn">25</span></span></code></pre></div>
<p>This is not a perfect description of what the computer does. But it is a good enough model for now.</p>
<blockquote>
<p>But one of the things he have to learn how to do is to ignore details. The key to understanding complex things is knowing what not to look at, and what not to compute, and what not to think.</p>
</blockquote>
<h3 id="1.4" class="anchor">
<a class="anchor__link link" href="#1.4">#</a>Evaluating conditionals
</h3>
<p>To evaluate <code class="sourceCode scheme">(<span class="kw">if</span> &lt;predicate&gt; &lt;consequent&gt; &lt;alternative&gt;)</code>, follow these steps:</p>
<ol type="1">
<li>Evaluate the predicate expression.
<ol type="1">
<li>If it yields true, evaluate the consequent expression.</li>
<li>If it yields false, evaluate the alternative expression.</li>
</ol></li>
</ol>
<h4 id="1.4.1" class="anchor">
<a class="anchor__link link" href="#1.4.1">#</a>Example
</h4>
<p>The addition operator in Peano arithmetic uses a conditional:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">define</span> (<span class="fu">+</span> x y)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">if</span> (<span class="fu">=</span> x <span class="cn">0</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>      y</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>      (<span class="fu">+</span> (<span class="fu">-1+</span> x) (<span class="fu">1+</span> y))))</span></code></pre></div>
<p>Now we can evaluate <code class="sourceCode scheme">(<span class="fu">+</span> <span class="cn">3</span> <span class="cn">4</span>)</code> like so:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>(<span class="fu">+</span> <span class="cn">3</span> <span class="cn">4</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>(<span class="kw">if</span> (<span class="fu">=</span> <span class="cn">3</span> <span class="cn">0</span>) <span class="cn">4</span> (<span class="fu">+</span> (<span class="fu">-1+</span> <span class="cn">3</span>) (<span class="fu">1+</span> <span class="cn">4</span>)))</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>(<span class="fu">+</span> (<span class="fu">-1+</span> <span class="cn">3</span>) (<span class="fu">1+</span> <span class="cn">4</span>))</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>(<span class="fu">+</span> (<span class="fu">-1+</span> <span class="cn">3</span>) <span class="cn">5</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>(<span class="fu">+</span> <span class="cn">2</span> <span class="cn">5</span>)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>(<span class="kw">if</span> (<span class="fu">=</span> <span class="cn">2</span> <span class="cn">0</span>) <span class="cn">5</span> (<span class="fu">+</span> (<span class="fu">-1+</span> <span class="cn">2</span>) (<span class="fu">1+</span> <span class="cn">5</span>)))</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>(<span class="fu">+</span> (<span class="fu">-1+</span> <span class="cn">2</span>) (<span class="fu">1+</span> <span class="cn">5</span>))</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>(<span class="fu">+</span> (<span class="fu">-1+</span> <span class="cn">2</span>) <span class="cn">6</span>)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>(<span class="fu">+</span> <span class="cn">1</span> <span class="cn">6</span>)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>(<span class="kw">if</span> (<span class="fu">=</span> <span class="cn">1</span> <span class="cn">0</span>) <span class="cn">6</span> (<span class="fu">+</span> (<span class="fu">-1+</span> <span class="cn">1</span>) (<span class="fu">1+</span> <span class="cn">6</span>)))</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>(<span class="fu">+</span> (<span class="fu">-1+</span> <span class="cn">1</span>) (<span class="fu">1+</span> <span class="cn">6</span>))</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>(<span class="fu">+</span> (<span class="fu">-1+</span> <span class="cn">1</span>) <span class="cn">7</span>)</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>(<span class="fu">+</span> <span class="cn">0</span> <span class="cn">7</span>)</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>(<span class="kw">if</span> (<span class="fu">=</span> <span class="cn">0</span> <span class="cn">0</span>) <span class="cn">7</span> (<span class="fu">+</span> (<span class="fu">-1+</span> <span class="cn">0</span>) (<span class="fu">1+</span> <span class="cn">7</span>)))</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="cn">7</span></span></code></pre></div>
<h2 id="2" class="anchor">
<a class="anchor__link link" href="#2">#</a>Part 2
</h2>
<h3 id="2.1" class="anchor">
<a class="anchor__link link" href="#2.1">#</a>Pre-visualization
</h3>
<ul>
<li>A program made of procedures and expression evolves a process.</li>
<li>But how do particular programs evolve particle processes?</li>
<li>We want to be able to go from particularly shaped programs to particularly shaped processes.</li>
<li>We want to pre-visualize the process like a photographer pre-visualizes the photo before taking the shot.</li>
</ul>
<h3 id="2.2" class="anchor">
<a class="anchor__link link" href="#2.2">#</a>Peano arithmetic
</h3>
<p>There are two ways to add whole numbers in Peano arithmetic.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">define</span> (<span class="fu">+</span> x y)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">if</span> (<span class="fu">=</span> x <span class="cn">0</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>      y</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>      (<span class="fu">+</span> (<span class="fu">-1+</span> x) (<span class="fu">1+</span> y))))</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>(<span class="kw">define</span> (<span class="fu">+</span> x y)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">if</span> (<span class="fu">=</span> x <span class="cn">0</span>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>      y</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>      (<span class="fu">1+</span> (<span class="fu">+</span> (<span class="fu">-1+</span> x) y))))</span></code></pre></div>
<p>Both are written using recursion, but they are different: the first generates a <em>linear iterative</em> process with <span class="math inline">Θ(n)</span> time and <span class="math inline">Θ(n)</span> space; the second generates a <em>linear recursive</em> process with <span class="math inline">Θ(n)</span> time and <span class="math inline">Θ(1)</span> space.</p>
<p>The iteration has all of its state in explicit variables. The recursion does not.</p>
<h2 id="3" class="anchor">
<a class="anchor__link link" href="#3">#</a>Part 3
</h2>
<h3 id="3.1" class="anchor">
<a class="anchor__link link" href="#3.1">#</a>Perturbation analysis
</h3>
<p>Make small changes to the program, see how it affects the process.</p>
<h3 id="3.2" class="anchor">
<a class="anchor__link link" href="#3.2">#</a>Fibonacci sequence
</h3>
<p>We can represent the Fibonacci numbers 0, 1, 1, 2, 3, 5, 8, 13, 21, … in Lisp:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">define</span> (fib n)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">if</span> (<span class="fu">&lt;</span> n <span class="cn">2</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>      n</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>      (<span class="fu">+</span> (fib (<span class="fu">-</span> n <span class="cn">1</span>))</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>         (fib (<span class="fu">-</span> n <span class="cn">2</span>)))))</span></code></pre></div>
<p>This is a <em>tree-recursive</em> process. We can represent the evaluation with a tree. This is a terribly inefficient process because their is so much redundant computation. The time complexity of this is actually the Fibonacci numbers. The space complexity is linear.</p>
<blockquote>
<p>The reason why people think programming is hard is because you’re writing down a general rule which is going to be used for lots of instances—it’s going to control all of those instances.</p>
</blockquote>
<h3 id="3.3" class="anchor">
<a class="anchor__link link" href="#3.3">#</a>Tower of Hanoi
</h3>
<blockquote>
<p>The way in which you construct a recursive process is by wishful thinking. You have to believe.</p>
</blockquote>
<p>Move an n-high tower from spike <code>from</code> to spike <code>to</code> using spike <code>spare</code> as a spare:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">define</span> (move n from to spare)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">cond</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    ((<span class="fu">=</span> n <span class="cn">0</span>) <span class="st">&quot;DONE&quot;</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">else</span> (move (<span class="fu">-1+</span> n) from spare to)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>          (print-move from to)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>          (move (<span class="fu">-1+</span> m) spare to from))))</span></code></pre></div>
</main>
<nav class="pagenav pagenav--bottom" aria-label="secondary">
  <div class="pagenav__item pagenav__item--prev">
    <a class="pagenav__link link" href="1a.html">
      <svg alt="" class="arrow" width="18" height="18" viewBox="0 0 24 24">
    <path d="M5 12h14M5 12l6 6M5 12l6-6"/>
  </svg> Prev
    </a>
  </div>
  <div class="pagenav__item pagenav__item--up">
    <a class="pagenav__link link" href="index.html"><svg alt="" class="arrow" width="18" height="18" viewBox="0 0 24 24">
    <path d="M12 5v14M18 11l-6-6M6 11l6-6"/>
  </svg> Up</a>
  </div>
  <div class="pagenav__item pagenav__item--next">
    <a class="pagenav__link link" href="2a.html">
      Next <svg alt="" class="arrow" width="18" height="18" viewBox="0 0 24 24">
    <path d="M5 12h14M13 18l6-6M13 6l6 6"/>
  </svg>
    </a>
  </div>
  </nav>
<footer class="footer">
  <p>© 2020 Mitchell Kember</p>
</footer>
</body>
</html>
