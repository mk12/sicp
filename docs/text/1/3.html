<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SICP Section 1.3 Notes</title>
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css">
  <link rel="stylesheet" href="../../style.css">
</head>
<body>
<div hidden>
  <svg>
    <symbol id="up" viewBox="0 0 11 12">
      <path fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" d="M5.5.8v10.4m4.457-5.943L5.5.8 1.043 5.257"/>
    </symbol>
    <symbol id="left" viewBox="0 0 12 11">
      <path fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" d="M.8 5.5h10.4M5.257 9.957L.8 5.5l4.457-4.457"/>
    </symbol>
    <symbol id="right" viewBox="0 0 12 11">
      <use xlink:href="#left" transform="matrix(-1 0 0 1 12 0)"/>
    </symbol>
    <symbol id="external" viewBox="0 0 24 24">
      <path fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" d="M10.688 5.438H4.125A2.65 2.65 0 001.5 8.063v11.812A2.65 2.65 0 004.125 22.5h11.813a2.65 2.65 0 002.624-2.625v-6.563m-9.187 1.313L22.5 1.5m-6.563 0H22.5v6.563"/>
    </symbol>
    <symbol id="circle-left" viewBox="0 0 18 18" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="9" stroke-width="1.69" transform="matrix(.8889 0 0 .8889 -1.667 -1.667)"/>
      <path stroke-width="1.5" d="M5.229 9h7.542M9 5.229L5.229 9 9 12.771"/>
    </symbol>
  </svg>
</div>
<a class="skip-link" href="#main">Skip to main content</a>
<header class="header">
  <a class="title link" href="../../index.html">SICP Study</a>
  <nav class="sitenav" aria-label="site">
    <a class="sitenav__item sitenav__item--active link"
        href="../../text/index.html" aria-label="textbook notes">Text</a>
    <a class="sitenav__item link"
        href="../../lecture/index.html" aria-label="lecture notes">Lecture</a>
    <a class="sitenav__item link"
        href="../../exercise/index.html" aria-label="exercises">Exercise</a>
    <a class="sitenav__item sitenav__item--last link"
        href="https://github.com/mk12/sicp" aria-label="GitHub repository">
      Source
      <svg class="github-mark" width="25" height="25" viewBox="0 0 136 133" aria-hidden="true">
        <path fill="currentColor" d="M67.866.002C30.387.002 0 30.39 0 67.877c0 29.988 19.446 55.425 46.417 64.404 3.396.621 4.633-1.475 4.633-3.275 0-1.608-.058-5.879-.091-11.541-18.88 4.1-22.863-9.1-22.863-9.1-3.087-7.838-7.537-9.925-7.537-9.925-6.163-4.213.466-4.13.466-4.13 6.813.484 10.396 6.996 10.396 6.996 6.054 10.371 15.888 7.375 19.754 5.642.617-4.387 2.367-7.38 4.309-9.075-15.071-1.712-30.917-7.537-30.917-33.546 0-7.408 2.646-13.466 6.988-18.212-.7-1.717-3.03-8.617.662-17.963 0 0 5.7-1.825 18.667 6.959 5.412-1.505 11.22-2.259 16.992-2.284 5.762.025 11.57.78 16.991 2.284 12.959-8.784 18.646-6.959 18.646-6.959 3.704 9.346 1.375 16.246.675 17.963 4.35 4.746 6.98 10.804 6.98 18.212 0 26.075-15.872 31.813-30.992 33.492 2.437 2.096 4.608 6.237 4.608 12.57 0 9.072-.083 16.392-.083 18.617 0 1.817 1.22 3.93 4.666 3.267 26.95-8.996 46.38-34.417 46.38-64.396 0-37.487-30.392-67.875-67.88-67.875"/>
      </svg>      
    </a>
  </nav>
</header>
<nav class="pagenav pagenav--top" aria-label="page">
  <div class="pagenav__item pagenav__item--left">
    <a class="pagenav__link link" href="2.html" aria-label="previous page">
      <svg width="12" height="11" aria-hidden="true"><use xlink:href="#left"/>
      </svg><span class="pagenav__prev">Prev</span>
    </a>
  </div>
  <div class="pagenav__item pagenav__item--center">
    <a class="pagenav__link link" href="index.html" aria-label="parent page">
      <svg width="11" height="12" aria-hidden="true"><use xlink:href="#up"/>
      </svg><span class="pagenav__up">Up</span>
    </a>
  </div>
  <div class="pagenav__item pagenav__item--right">
    <a class="pagenav__link link" href="../2/index.html" aria-label="next page">
      <span class="pagenav__next">Next</span
        ><svg width="12" height="11" aria-hidden="true"
        ><use xlink:href="#right"/></svg>
    </a>
  </div>
</nav>
<main id="main">
<h1>
<span class="number">1.3</span> <a class="link" href="https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book-Z-H-12.html">Formulating Abstractions with Higher-Order Procedures<span class="nowrap">﻿<svg class="external" width="24" height="24" aria-hidden="true"><use xlink:href="#external"/></svg></span></a>
</h1>
<blockquote>
<p>We have seen that procedures are, in effect, abstractions that describe compound operations on numbers independent of the particular numbers. <a class="citation" href="https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book-Z-H-12.html" title="SICP Section 1.3">(Section&nbsp;1.3)</a></p>
</blockquote>
<blockquote>
<p>One of the things we should demand from a powerful programming language is the ability to build abstractions by assigning names to common patterns and then to work in terms of the abstractions directly. <a class="citation" href="https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book-Z-H-12.html" title="SICP Section 1.3">(Section&nbsp;1.3)</a></p>
</blockquote>
<ul>
<li>Procedures operating on numbers are powerful, but we can go further.</li>
<li>To abstract more general programming patterns, we need to write procedures that take other procedures as arguments and return new procedures.</li>
<li>These are called <em>higher-order</em> procedures.</li>
</ul>
<h2 id="1.3.1" class="anchor">
<a class="anchor__link link" href="#1.3.1" aria-hidden="true">#</a> <span class="number">1.3.1</span> <a class="link" href="https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book-Z-H-12.html#%25_sec_1.3.1">Procedures as Arguments<span class="nowrap">﻿<svg class="external" width="24" height="24" aria-hidden="true"><use xlink:href="#external"/></svg></span></a>
</h2>
<p>Procedures that compute a sum all look the same:</p>
<pre><code class="blockcode">(<span class="kw">define</span> (<span class="ss">name</span> a b)
  (<span class="kw">if</span> (<span class="fu">&gt;</span> a b)
      <span class="cn">0</span>
      (<span class="fu">+</span> (<span class="ss">term</span> a)
         (<span class="ss">name</span> (<span class="ss">next</span> a) b))))</code></pre>
<p>This is a useful abstraction, just as sigma notation is useful in math because the summation of a series is so common.</p>
<blockquote>
<p>The power of sigma notation is that it allows mathematicians to deal with the concept of summation itself rather than only with particular sums. <a class="citation" href="https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book-Z-H-12.html#%25_sec_1.3.1" title="SICP Section 1.3.1">(Section&nbsp;1.3.1)</a></p>
</blockquote>
<aside><h4>Exercises:</h4> <ul class="flat"><li class="flat__item"><a href="../../exercise/1/3.html#ex1.29">1.29</a>, </li><li class="flat__item"><a href="../../exercise/1/3.html#ex1.30">1.30</a>, </li><li class="flat__item"><a href="../../exercise/1/3.html#ex1.31">1.31</a>, </li><li class="flat__item"><a href="../../exercise/1/3.html#ex1.32">1.32</a>, </li><li class="flat__item"><a href="../../exercise/1/3.html#ex1.33">1.33</a></li></ul></aside>
<h2 id="1.3.2" class="anchor">
<a class="anchor__link link" href="#1.3.2" aria-hidden="true">#</a> <span class="number">1.3.2</span> <a class="link" href="https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book-Z-H-12.html#%25_sec_1.3.2">Constructing Procedures Using <code>Lambda</code><span class="nowrap">﻿<svg class="external" width="24" height="24" aria-hidden="true"><use xlink:href="#external"/></svg></span></a>
</h2>
<p><code>lambda</code> creates anonymous procedures. They are just like the procedures created by <code>define</code>, but without a name: <code>(<span class="kw">lambda</span> (<span class="ss">formal-parameters</span>) <span class="ss">body</span>)</code>.</p>
<p>A lambda expression can be used as the operand in a combination. It will be evaluated to a procedure and applied to the arguments (the evaluated operands). The name comes from the <a href="https://en.wikipedia.org/wiki/Lambda_calculus">λ-calculus</a>, a formal system invented by Alonzo Church.</p>
<h3 id="1.3.2.1" class="anchor">
<a class="anchor__link link" href="#1.3.2.1" aria-hidden="true">#</a> Using <code>let</code> to create local variables
</h3>
<p>We often need local variables in addition to the formal parameters. We can do this with a lambda expression that takes the local variables as arguments, but this is so common that there is a special form <code>let</code> to make it easier.</p>
<p>The general form of a let-expression is:</p>
<pre><code class="blockcode">(<span class="kw">let</span> ((<span class="ss">var1</span> <span class="ss">exp1</span>)
      (<span class="ss">var2</span> <span class="ss">exp2</span>)
      ...
      (<span class="ss">varn</span> <span class="ss">expn</span>))
  <span class="ss">body</span>)</code></pre>
<p>This is just syntactic sugar for:</p>
<pre><code class="blockcode">((<span class="kw">lambda</span> (<span class="ss">var1</span> <span class="ss">var2</span> ... <span class="ss">varn</span>)
   <span class="ss">body</span>)
 <span class="ss">exp1</span>
 <span class="ss">exp2</span>
 ...
 <span class="ss">expn</span>)</code></pre>
<ul>
<li>The scope of a variable in a let-expression is the body. This allows variables to be bound as locally as possible.</li>
<li>The variables in the let-expression are parallel and independent. They cannot refer to each other, and their order does not matter.</li>
<li>You can use let-expressions instead of <a href="1.html#1.1.8.2">internal definitions</a>.</li>
</ul>
<aside><h4>Exercises:</h4> <ul class="flat"><li class="flat__item"><a href="../../exercise/1/3.html#ex1.34">1.34</a></li></ul></aside>
<h2 id="1.3.3" class="anchor">
<a class="anchor__link link" href="#1.3.3" aria-hidden="true">#</a> <span class="number">1.3.3</span> <a class="link" href="https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book-Z-H-12.html#%25_sec_1.3.3">Procedures as General Methods<span class="nowrap">﻿<svg class="external" width="24" height="24" aria-hidden="true"><use xlink:href="#external"/></svg></span></a>
</h2>
<p>So far, we have seen:</p>
<ul>
<li>Compound procedures that abstract patterns of numerical operators (mathematical functions), independent of the particular numbers.</li>
<li>Higher-order procedures that express a more powerful kind of abstraction, independent of the procedures involved.</li>
</ul>
<p>Now we will take it a bit further.</p>
<h3 id="1.3.3.1" class="anchor">
<a class="anchor__link link" href="#1.3.3.1" aria-hidden="true">#</a> Finding roots of equations by the half-interval method
</h3>
<ul>
<li>The <em>half-interval method</em>&hairsp;: a simple but powerful technique for solving <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">f(x) = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>.</li>
<li>Given <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo>&lt;</mo><mn>0</mn><mo>&lt;</mo><mi>f</mi><mo stretchy="false">(</mo><mi>b</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(a) &lt; 0 &lt; f(b)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68354em;vertical-align:-0.0391em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">b</span><span class="mclose">)</span></span></span></span>, there must be at least one zero between <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">a</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">b</span></span></span></span>.</li>
<li>To narrow it down, we let <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> be the average of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">a</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">b</span></span></span></span>, and then replace either the left bound or the right bound with it.</li>
</ul>
<pre><code class="blockcode">(<span class="kw">define</span> (search f neg-point pos-point)
  (<span class="kw">let</span> ((midpoint (average neg-point pos-point)))
    (<span class="kw">if</span> (close-enough? neg-point pos-point)
        midpoint
        (<span class="kw">let</span> ((test-value (f midpoint)))
          (<span class="kw">cond</span> ((<span class="fu">positive?</span> test-value)
                 (search f neg-point midpoint))
                ((<span class="fu">negative?</span> test-value)
                 (search f midpoint pos-point))
                (<span class="kw">else</span> midpoint))))))

(<span class="kw">define</span> (close-enough? x y)
  (<span class="fu">&lt;</span> (<span class="fu">abs</span> (<span class="fu">-</span> x y)) <span class="cn">0.001</span>))

(<span class="kw">define</span> (half-interval-method f a b)
  (<span class="kw">let</span> ((a-value (f a))
        (b-value (f b)))
    (<span class="kw">cond</span> ((<span class="kw">and</span> (<span class="fu">negative?</span> a-value) (<span class="fu">positive?</span> b-value))
           (search f a b))
          ((<span class="kw">and</span> (<span class="fu">negative?</span> b-value) (<span class="fu">positive?</span> a-value))
           (search f b a))
          (<span class="kw">else</span>
           (<span class="fu">error</span> <span class="cn">&quot;Values are not of opposite sign&quot;</span> a b)))))</code></pre>
<p>We can use <code>half-interval-method</code> to approximate <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span></span></span></span> as a root of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>sin</mi><mo>⁡</mo><mi>x</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\sin x=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66786em;vertical-align:0em;"></span><span class="mop">sin</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>:</p>
<pre><code class="blockcode">(half-interval-method <span class="fu">sin</span> <span class="cn">2.0</span> <span class="cn">4.0</span>) <span class="op">~&gt;</span> <span class="cn">3.14111328125</span></code></pre>
<h3 id="1.3.3.2" class="anchor">
<a class="anchor__link link" href="#1.3.3.2" aria-hidden="true">#</a> Finding fixed points of functions
</h3>
<ul>
<li>A number <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> is a <em>fixed point</em> of a function if <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">f(x) = x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span>.</li>
<li>In some cases, repeatedly applying the function to an arbitrary initial guess will converge on the fixed point.</li>
<li>The procedure we made earlier for finding square roots is actually a special case of the fixed point procedure.</li>
</ul>
<pre><code class="blockcode">(<span class="kw">define</span> tolerance <span class="cn">0.00001</span>)
(<span class="kw">define</span> (fixed-point f first-guess)
  (<span class="kw">define</span> (close-enough? v1 v2)
    (<span class="fu">&lt;</span> (<span class="fu">abs</span> (<span class="fu">-</span> v1 v2)) tolerance))
  (<span class="kw">define</span> (try guess)
    (<span class="kw">let</span> ((next (f guess)))
      (<span class="kw">if</span> (close-enough? guess next)
          next
          (try next))))
  (try first-guess))</code></pre>
<p>We can use <code>fixed-point</code> to approximate the fixed point of the cosine function:</p>
<pre><code class="blockcode">(fixed-point <span class="fu">cos</span> <span class="cn">1.0</span>) <span class="op">~&gt;</span> <span class="cn">0.7390822985224023</span></code></pre>
<aside><h4>Exercises:</h4> <ul class="flat"><li class="flat__item"><a href="../../exercise/1/3.html#ex1.35">1.35</a>, </li><li class="flat__item"><a href="../../exercise/1/3.html#ex1.36">1.36</a>, </li><li class="flat__item"><a href="../../exercise/1/3.html#ex1.37">1.37</a>, </li><li class="flat__item"><a href="../../exercise/1/3.html#ex1.38">1.38</a>, </li><li class="flat__item"><a href="../../exercise/1/3.html#ex1.39">1.39</a></li></ul></aside>
<h2 id="1.3.4" class="anchor">
<a class="anchor__link link" href="#1.3.4" aria-hidden="true">#</a> <span class="number">1.3.4</span> <a class="link" href="https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book-Z-H-12.html#%25_sec_1.3.4">Procedures as Returned Values<span class="nowrap">﻿<svg class="external" width="24" height="24" aria-hidden="true"><use xlink:href="#external"/></svg></span></a>
</h2>
<p>Passing procedures as arguments gives us expressive power. Returning procedures from functions gives us even more. For example, we can write a procedure that creates a new procedure with average damping:</p>
<pre><code class="blockcode">(<span class="kw">define</span> (average-damp f)
  (<span class="kw">lambda</span> (x) (average x (f x))))</code></pre>
<p>If we use <code>average-damp</code> on <code>square</code>, we get a procedure that calculates the sum of the numbers from 1 to <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span>:</p>
<pre><code class="blockcode">((average-damp square) <span class="cn">10</span>) <span class="op">=&gt;</span> <span class="cn">55</span>
(<span class="fu">+</span> <span class="cn">1</span> <span class="cn">2</span> <span class="cn">3</span> <span class="cn">4</span> <span class="cn">5</span> <span class="cn">6</span> <span class="cn">7</span> <span class="cn">8</span> <span class="cn">9</span> <span class="cn">10</span>) <span class="op">=&gt;</span> <span class="cn">55</span></code></pre>
<div id="q1" class="highlight">
<a class="highlight__link link" href="../highlight.html#1.3-q1" aria-label="view quote in highlights page"><svg class="circle-arrow" width="18" height="18" aria-hidden="true"><use xlink:href="#circle-left"/></svg> Highlights</a>
<blockquote>
<p>In general, there are many ways to formulate a process as a procedure. Experienced programmers know how to choose procedural formulations that are particularly perspicuous, and where useful elements of the process are exposed as separate entities that can be reused in other applications. <a class="citation" href="https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book-Z-H-12.html#%25_sec_1.3.4" title="SICP Section 1.3.4">(Section&nbsp;1.3.4)</a></p>
</blockquote>
</div>
<h3 id="1.3.4.1" class="anchor">
<a class="anchor__link link" href="#1.3.4.1" aria-hidden="true">#</a> Newton’s method
</h3>
<p>The square-root procedure we wrote earlier was a special case of <em>Newton’s method</em>. Given a function <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span>, the solution to <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">f(x) = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span> is given by the fixed point of</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>x</mi><mo>↦</mo><mi>x</mi><mo>−</mo><mfrac><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><mrow><msup><mi>f</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mfrac><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">x ↦ x - \frac{f(x)}{f&#x27;(x)}.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.522em;vertical-align:-0.011em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">↦</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6778919999999999em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord">.</span></span></span></span></span></p>
<p>Newton’s method converges very quickly—much faster than the half-interval method in favorable cases. We need a procedure to transform a function into its derivative (a new procedure). We can use a small <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">dx</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">x</span></span></span></span> for this:</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>f</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mi>d</mi><mi>x</mi><mo stretchy="false">)</mo><mo>−</mo><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><mrow><mi>d</mi><mi>x</mi></mrow></mfrac><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">f&#x27;(x) = \frac{f(x+dx) - f(x)}{dx}.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.051892em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.801892em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.113em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="mord mathnormal">x</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord">.</span></span></span></span></span></p>
<p>This translates to the following procedure:</p>
<pre><code class="blockcode">(<span class="kw">define</span> (deriv f)
  (<span class="kw">lambda</span> (x) (<span class="fu">/</span> (<span class="fu">-</span> (f (<span class="fu">+</span> x dx)) (f x)) dx)))</code></pre>
<p>Now we can do things like this:</p>
<pre><code class="blockcode">(<span class="kw">define</span> (cube x) (<span class="fu">*</span> x x x))
(<span class="kw">define</span> dx <span class="cn">0.00001</span>)
((deriv cube) <span class="cn">5</span>)
<span class="op">=&gt;</span> <span class="cn">75.00014999664018</span></code></pre>
<h3 id="1.3.4.2" class="anchor">
<a class="anchor__link link" href="#1.3.4.2" aria-hidden="true">#</a> Abstractions and first-class procedures
</h3>
<ul>
<li>Compound procedures let us express general methods of computing as explicit elements in our programming language.</li>
<li>Higher-order procedures let us manipulate methods to create further abstractions.</li>
<li>We should always be on the lookout for underlying abstractions that can be brought out and generalized. But this doesn’t mean we should always program in the most abstract form possible; there is a level appropriate to each task.</li>
<li>Elements with the fewest restrictions are <em>first-class</em>:
<ul>
<li>They may be named by variables.</li>
<li>They may be passed as arguments to procedures.</li>
<li>They may be returned as the results of procedures.</li>
<li>They may be included in data structures.</li>
</ul></li>
<li>In Lisp, procedures have first-class status. This gives us an enormous gain in expressive power.</li>
</ul>
<aside><h4>Exercises:</h4> <ul class="flat"><li class="flat__item"><a href="../../exercise/1/3.html#ex1.40">1.40</a>, </li><li class="flat__item"><a href="../../exercise/1/3.html#ex1.41">1.41</a>, </li><li class="flat__item"><a href="../../exercise/1/3.html#ex1.42">1.42</a>, </li><li class="flat__item"><a href="../../exercise/1/3.html#ex1.43">1.43</a>, </li><li class="flat__item"><a href="../../exercise/1/3.html#ex1.44">1.44</a>, </li><li class="flat__item"><a href="../../exercise/1/3.html#ex1.45">1.45</a>, </li><li class="flat__item"><a href="../../exercise/1/3.html#ex1.46">1.46</a></li></ul></aside>
</main>
<nav class="pagenav pagenav--bottom" aria-label="page">
  <div class="pagenav__item pagenav__item--left">
    <a class="pagenav__link link" href="2.html" aria-label="previous page">
      <svg width="12" height="11" aria-hidden="true"><use xlink:href="#left"/>
      </svg><span class="pagenav__prev">Prev</span>
    </a>
  </div>
  <div class="pagenav__item pagenav__item--center">
    <a class="pagenav__link link" href="index.html" aria-label="parent page">
      <svg width="11" height="12" aria-hidden="true"><use xlink:href="#up"/>
      </svg><span class="pagenav__up">Up</span>
    </a>
  </div>
  <div class="pagenav__item pagenav__item--right">
    <a class="pagenav__link link" href="../2/index.html" aria-label="next page">
      <span class="pagenav__next">Next</span
        ><svg width="12" height="11" aria-hidden="true"
        ><use xlink:href="#right"/></svg>
    </a>
  </div>
</nav>
<footer class="footer">
  <p>© 2021 Mitchell Kember</p>
</footer>
</body>
</html>
