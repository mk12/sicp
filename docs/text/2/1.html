<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Mitchell Kember">
  <title>SICP Section 2.1 Notes</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
   var mathElements = document.getElementsByClassName("math");
   var macros = [];
   for (var i = 0; i < mathElements.length; i++) {
    var texText = mathElements[i].firstChild;
    if (mathElements[i].tagName == "SPAN") {
     katex.render(texText.data, mathElements[i], {
      displayMode: mathElements[i].classList.contains('display'),
      throwOnError: false,
      macros: macros,
      fleqn: false
     });
  }}});
  </script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" />
  <link rel="stylesheet" href="../../assets/style.css">
</head>
<body>
<header class="header ">
  <a class="title link" href="../../index.html">SICP Study</a>
  <span class="gap"></span>
  <nav class="sitenav">
    <a class="sitenav__item link  sitenav__item--active" href="../../text/index.html">Text</a>
    <a class="sitenav__item link " href="../../lecture/index.html">Lecture</a>
    <a class="sitenav__item link " href="../../exercise/index.html">Exercise</a>
    <a class="sitenav__item link" href="https://github.com/mk12/sicp">Source <svg class="github-mark" width="25" height="25" viewBox="0 0 136 133">
  <g transform="matrix(1,0,0,1,-568.001,-447.669)">
    <g transform="matrix(4.16667,0,0,4.16667,0,0)">
      <g transform="matrix(1,0,0,1,152.608,139.345)">
        <path d="M0,-31.904C-8.995,-31.904 -16.288,-24.611 -16.288,-15.614C-16.288,-8.417 -11.621,-2.312 -5.148,-0.157C-4.333,-0.008 -4.036,-0.511 -4.036,-0.943C-4.036,-1.329 -4.05,-2.354 -4.058,-3.713C-8.589,-2.729 -9.545,-5.897 -9.545,-5.897C-10.286,-7.778 -11.354,-8.279 -11.354,-8.279C-12.833,-9.29 -11.242,-9.27 -11.242,-9.27C-9.607,-9.154 -8.747,-7.591 -8.747,-7.591C-7.294,-5.102 -4.934,-5.821 -4.006,-6.237C-3.858,-7.29 -3.438,-8.008 -2.972,-8.415C-6.589,-8.826 -10.392,-10.224 -10.392,-16.466C-10.392,-18.244 -9.757,-19.698 -8.715,-20.837C-8.883,-21.249 -9.442,-22.905 -8.556,-25.148C-8.556,-25.148 -7.188,-25.586 -4.076,-23.478C-2.777,-23.839 -1.383,-24.02 0.002,-24.026C1.385,-24.02 2.779,-23.839 4.08,-23.478C7.19,-25.586 8.555,-25.148 8.555,-25.148C9.444,-22.905 8.885,-21.249 8.717,-20.837C9.761,-19.698 10.392,-18.244 10.392,-16.466C10.392,-10.208 6.583,-8.831 2.954,-8.428C3.539,-7.925 4.06,-6.931 4.06,-5.411C4.06,-3.234 4.04,-1.477 4.04,-0.943C4.04,-0.507 4.333,0 5.16,-0.159C11.628,-2.318 16.291,-8.419 16.291,-15.614C16.291,-24.611 8.997,-31.904 0,-31.904"/>
      </g>
    </g>
  </g>
</svg></a>
  </nav>
</header>
<nav class="pagenav pagenav--top">
  <div class="pagenav__item pagenav__item--prev"><a class="pagenav__link link" href="index.html">← Prev</a></div>
  <div class="pagenav__item pagenav__item--up"><a class="pagenav__link link" href="index.html">↑ Up</a></div>
  <div class="pagenav__item pagenav__item--next"><a class="pagenav__link link" href="2.html">Next →</a></div>
</nav>
<h1>
Introduction to Data Abstraction<small class="number">2.1</small>
</h1>
<ul>
<li>We already know about procedural abstraction: the procedure is a black box, and we don’t care how it is implemented internally.</li>
<li>Data abstractions allows us to isolate how a compound data object is used from the details of its actual representation.</li>
</ul>
<blockquote>
<p>That is, our programs should use data in such a way as to make no assumptions about the data that are not strictly necessary for performing the task at hand.</p>
</blockquote>
<ul>
<li>There is a concrete data representation behind the abstraction.</li>
<li>The interface between the two parts of the system is a set of procedures: selectors and constructors.</li>
</ul>
<h2 id="2.1.1" class="anchor">
<a class="anchor__link link" href="#2.1.1">#</a>Example: Arithmetic Operations for Rational Numbers<small class="number">2.1.1</small>
</h3>
<ul>
<li>We want to add, subtract, multiply, divide, and test equality with our rational numbers.</li>
<li>We assume we have <code class="sourceCode scheme">(make-rat &lt;n&gt; &lt;d&gt;)</code>, <code class="sourceCode scheme">(number &lt;x&gt;)</code>, and <code class="sourceCode scheme">(denom &lt;x&gt;)</code> available as the constructor and selectors.</li>
<li>This is wishful thinking, and it is a good technique.</li>
<li>A <em>pair</em> is a concrete structure that we create with <code>cons</code>.</li>
<li>We extract the parts of the pair with <code>car</code> and <code>cdr</code>.</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>(<span class="ex">define</span><span class="fu"> x </span>(<span class="kw">cons</span> <span class="dv">1</span> <span class="dv">2</span>))</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>(<span class="kw">car</span> x)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>(<span class="kw">cdr</span> x)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>(<span class="ex">define</span><span class="fu"> y </span>(<span class="kw">cons</span> <span class="dv">3</span> <span class="dv">4</span>))</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>(<span class="ex">define</span><span class="fu"> z </span>(<span class="kw">cons</span> x y))</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>(<span class="kw">car</span> (<span class="kw">car</span> z))</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>(<span class="kw">car</span> (<span class="kw">cdr</span> z))</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span></span></code></pre></div>
<ul>
<li>This is all the glue we need to implement all sorts of complex data structures.</li>
<li>Data objects constructed from pairs are <em>list-structured</em> data.</li>
<li>To ensure that our rational numbers are always in lowest terms, we need <code>make-rat</code> to divide the numerator and the denominator by their greatest common divisor (GCD).</li>
</ul>
<h2 id="2.1.2" class="anchor">
<a class="anchor__link link" href="#2.1.2">#</a>Abstractions Barriers<small class="number">2.1.2</small>
</h3>
<blockquote>
<p>In general, the underlying idea of data abstraction is to identify for each type of data object a basic set of operations in terms of which all manipulations of data objects of that type will be expressed, and then to use only those operations in manipulating the data. (118) FOO</p>
</blockquote>
<ul>
<li>The details on the other side of an abstraction barrier are irrelevant to the code on this side.</li>
<li>This makes programs easier to maintain and modify.</li>
</ul>
<blockquote>
<p>Constraining the dependence on the representation to a few interface procedures helps us design programs as well as modify them, because it allows us to maintain the flexibility to consider alternate implementations. (121) FOO</p>
</blockquote>
<h2 id="2.1.3" class="anchor">
<a class="anchor__link link" href="#2.1.3">#</a>What Is Meant by Data?<small class="number">2.1.3</small>
</h3>
<ul>
<li>Data is defined by some collection of selectors and constructors, together with specified conditions that these procedures must fulfill in order to be a valid representation.</li>
<li>For rationals, we have the following definition:
<ol type="1">
<li>We can construct a rational <code>x</code> with <code class="sourceCode scheme">(make-rat n d)</code>.</li>
<li>We can select the numerator with <code class="sourceCode scheme">(numer x)</code>.</li>
<li>We can select the denominator with <code class="sourceCode scheme">(denom x)</code>.</li>
<li>For all values of <code>x</code>, <code class="sourceCode scheme">(<span class="op">/</span> (numer x) (denom x))</code> must equal <span class="math inline">n/d</span>.</li>
</ol></li>
<li>For pairs, it is even simpler: we need three operations, which we will call <code>cons</code>, <code>car</code>, and <code>cdr</code>, such that if <code>z</code> is <code class="sourceCode scheme">(<span class="kw">cons</span> x y)</code>, then <code class="sourceCode scheme">(<span class="kw">car</span> z)</code> is <code>x</code> and <code class="sourceCode scheme">(<span class="kw">cdr</span> z)</code> is <code>y</code>.</li>
<li>Any triple of procedures satisfying this definition can be used to implement pairs. In fact, we can do it with procedures themselves and nothing else:</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>(<span class="ex">define</span><span class="fu"> </span>(<span class="kw">cons</span> x y)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">lambda</span> (m)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">if</span> (<span class="op">=</span> m <span class="dv">0</span>) x y)))</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>(<span class="ex">define</span><span class="fu"> </span>(<span class="kw">car</span> z) (z <span class="dv">0</span>))</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>(<span class="ex">define</span><span class="fu"> </span>(<span class="kw">cdr</span> z) (z <span class="dv">1</span>))</span></code></pre></div>
<ul>
<li>This doesn’t look like <em>data</em>, but it works.</li>
<li>This is how you implement pairs in the λ-calculus.</li>
<li>In real Lisp implementations, pairs are implemented directly, for reasons of efficiency – but they <em>could</em> be implemented this way and you wouldn’t be able to tell the difference.</li>
</ul>
<blockquote>
<p>[…] the ability to manipulate procedures as objects automatically provides the ability to represent compound data. (125) FOO</p>
</blockquote>
<ul>
<li>This style of programming is often called <em>message passing</em>.</li>
</ul>
<h2 id="2.1.4" class="anchor">
<a class="anchor__link link" href="#2.1.4">#</a>Extended Exercise: Interval Arithmetic<small class="number">2.1.4</small>
</h3>
<ul>
<li>We want to design a system that allows us to manipulate inexact quantities with known precision (uncertainty).</li>
<li>To do this, we need arithmetic operations for combining intervals – ranges of possible values.</li>
</ul>
<nav class="pagenav pagenav--bottom">
  <div class="pagenav__item pagenav__item--prev"><a class="pagenav__link link" href="index.html">← Prev</a></div>
  <div class="pagenav__item pagenav__item--up"><a class="pagenav__link link" href="index.html">↑ Up</a></div>
  <div class="pagenav__item pagenav__item--next"><a class="pagenav__link link" href="2.html">Next →</a></div>
</nav>
<footer class="footer">© 2020 Mitchell Kember</footer>
</body>
</html>
