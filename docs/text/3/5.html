<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SICP Section 3.5 Notes</title>
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css">
  <link rel="stylesheet" href="../../style.css">
</head>
<body>
<div hidden>
  <svg>
    <symbol id="up" viewBox="0 0 11 12">
      <path fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" d="M5.5.8v10.4m4.457-5.943L5.5.8 1.043 5.257"/>
    </symbol>
    <symbol id="left" viewBox="0 0 12 11">
      <path fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" d="M.8 5.5h10.4M5.257 9.957L.8 5.5l4.457-4.457"/>
    </symbol>
    <symbol id="right" viewBox="0 0 12 11">
      <use xlink:href="#left" transform="matrix(-1 0 0 1 12 0)"/>
    </symbol>
    <symbol id="external" viewBox="0 0 24 24">
      <path fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" d="M10.688 5.438H4.125A2.65 2.65 0 001.5 8.063v11.812A2.65 2.65 0 004.125 22.5h11.813a2.65 2.65 0 002.624-2.625v-6.563m-9.187 1.313L22.5 1.5m-6.563 0H22.5v6.563"/>
    </symbol>
    <symbol id="circle-left" viewBox="0 0 18 18" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="9" stroke-width="1.69" transform="matrix(.8889 0 0 .8889 -1.667 -1.667)"/>
      <path stroke-width="1.5" d="M5.229 9h7.542M9 5.229L5.229 9 9 12.771"/>
    </symbol>
  </svg>
</div>
<a class="skip-link" href="#main">Skip to main content</a>
<header class="header">
  <a class="title link" href="../../index.html">SICP Study</a>
  <nav class="sitenav" aria-label="site">
    <a class="sitenav__item sitenav__item--active link"
        href="../../text/index.html" aria-label="textbook notes">Text</a>
    <a class="sitenav__item link"
        href="../../lecture/index.html" aria-label="lecture notes">Lecture</a>
    <a class="sitenav__item link"
        href="../../exercise/index.html" aria-label="exercises">Exercise</a>
    <a class="sitenav__item sitenav__item--last link"
        href="https://github.com/mk12/sicp" aria-label="GitHub repository">
      Source
      <svg class="github-mark" width="25" height="25" viewBox="0 0 136 133" aria-hidden="true">
        <path fill="currentColor" d="M67.866.002C30.387.002 0 30.39 0 67.877c0 29.988 19.446 55.425 46.417 64.404 3.396.621 4.633-1.475 4.633-3.275 0-1.608-.058-5.879-.091-11.541-18.88 4.1-22.863-9.1-22.863-9.1-3.087-7.838-7.537-9.925-7.537-9.925-6.163-4.213.466-4.13.466-4.13 6.813.484 10.396 6.996 10.396 6.996 6.054 10.371 15.888 7.375 19.754 5.642.617-4.387 2.367-7.38 4.309-9.075-15.071-1.712-30.917-7.537-30.917-33.546 0-7.408 2.646-13.466 6.988-18.212-.7-1.717-3.03-8.617.662-17.963 0 0 5.7-1.825 18.667 6.959 5.412-1.505 11.22-2.259 16.992-2.284 5.762.025 11.57.78 16.991 2.284 12.959-8.784 18.646-6.959 18.646-6.959 3.704 9.346 1.375 16.246.675 17.963 4.35 4.746 6.98 10.804 6.98 18.212 0 26.075-15.872 31.813-30.992 33.492 2.437 2.096 4.608 6.237 4.608 12.57 0 9.072-.083 16.392-.083 18.617 0 1.817 1.22 3.93 4.666 3.267 26.95-8.996 46.38-34.417 46.38-64.396 0-37.487-30.392-67.875-67.88-67.875"/>
      </svg>      
    </a>
  </nav>
</header>
<nav class="pagenav pagenav--top" aria-label="page">
  <div class="pagenav__item pagenav__item--left">
    <a class="pagenav__link link" href="4.html" aria-label="previous page">
      <svg width="12" height="11" aria-hidden="true"><use xlink:href="#left"/>
      </svg><span class="pagenav__prev">Prev</span>
    </a>
  </div>
  <div class="pagenav__item pagenav__item--center">
    <a class="pagenav__link link" href="index.html" aria-label="parent page">
      <svg width="11" height="12" aria-hidden="true"><use xlink:href="#up"/>
      </svg><span class="pagenav__up">Up</span>
    </a>
  </div>
  <div class="pagenav__item pagenav__item--right">
    <a class="pagenav__link link" href="../4/index.html" aria-label="next page">
      <span class="pagenav__next">Next</span
        ><svg width="12" height="11" aria-hidden="true"
        ><use xlink:href="#right"/></svg>
    </a>
  </div>
</nav>
<main id="main">
<h1>
<span class="number">3.5</span> <a class="link" href="https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book-Z-H-24.html">Streams<span class="nowrap">⁠<svg class="external" width="24" height="24" aria-hidden="true"><use xlink:href="#external"/></svg></span></a>
</h1>
<ul>
<li>We’ve used assignment as a powerful tool and dealt with some of the complex problems it raises.</li>
<li>Now we will consider another approach to modeling state, using data structures called <em>streams</em>.</li>
<li>We want to avoid identifying time in the computer with time in the modeled world.</li>
<li>If <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> is a function of time <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">x(t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">x</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span>, we can think of the identity <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> as a history of values (and these don’t change).</li>
<li>With time measured in discrete steps, we can model a time function as a sequence of values.</li>
<li>Stream processing allows us to model state without assignments.</li>
</ul>
<h2 id="3.5.1" class="anchor">
<a class="anchor__link link" href="#3.5.1" aria-hidden="true">#</a> <span class="number">3.5.1</span> <a class="link" href="https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book-Z-H-24.html#%25_sec_3.5.1">Streams Are Delayed Lists<span class="nowrap">⁠<svg class="external" width="24" height="24" aria-hidden="true"><use xlink:href="#external"/></svg></span></a>
</h2>
<ul>
<li>If we represent streams as lists, we get elegance at the price of severe inefficiency (time <em>and</em> space).</li>
<li>Consider adding all the primes in an interval. Using <code>filter</code> and <code>reduce</code>, we waste a lot of space storing lists.</li>
<li>Streams are lazy lists. They are the clever idea of using sequence manipulations without incurring the cost.</li>
<li>We only construct an item of the stream when it is needed.</li>
<li>We have <code>cons-stream</code>, <code>stream-car</code>, <code>stream-cdr</code>, <code>the-empty-stream</code>, and <code>stream-null?</code>.</li>
<li>The <code>cons-stream</code> procedure must not evaluate its second argument until it is accessed by <code>stream-cdr</code>.</li>
<li>To implement streams, we will use <em>promises</em>. <code>(<span class="kw">delay</span> <span class="ss">exp</span>)</code> does not evaluate the argument but returns a promise. <code>(<span class="fu">force</span> <span class="ss">promise</span>)</code> evaluates a promise and returns the value.</li>
<li><code>(<span class="kw">cons-stream</span> a b)</code> is a special form equivalent to <code>(<span class="fu">cons</span> a (<span class="kw">delay</span> b))</code>.</li>
</ul>
<h3 id="3.5.1.1" class="anchor">
<a class="anchor__link link" href="#3.5.1.1" aria-hidden="true">#</a> The stream implementation in action
</h3>
<blockquote>
<p>In general, we can think of delayed evaluation as “demand-driven” programming, we herby each stage in the stream process is activated only enough to satisfy the next stage. <a class="citation" href="https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book-Z-H-24.html#%25_sec_3.5.1" title="SICP Section 3.5.1">(Section&nbsp;3.5.1)</a></p>
</blockquote>
<h3 id="3.5.1.2" class="anchor">
<a class="anchor__link link" href="#3.5.1.2" aria-hidden="true">#</a> Implementing <code>delay</code> and <code>force</code>
</h3>
<ul>
<li>Promises are quite straightforward to implement.</li>
<li><code>(<span class="kw">delay</span> <span class="ss">exp</span>)</code> is syntactic sugar for <code>(<span class="kw">lambda</span> () <span class="ss">exp</span>)</code>.</li>
<li><code>force</code> simply calls the procedure. We can optimize it by saving the result and not calling the procedure a second time.</li>
<li>The promise stored in the <code>cdr</code> of the stream is also known as a <em>thunk</em>.</li>
</ul>
<aside><h4>Exercises:</h4> <ul class="flat"><li class="flat__item"><a href="../../exercise/3/5.html#ex3.50">3.50</a>, </li><li class="flat__item"><a href="../../exercise/3/5.html#ex3.51">3.51</a>, </li><li class="flat__item"><a href="../../exercise/3/5.html#ex3.52">3.52</a></li></ul></aside>
<h2 id="3.5.2" class="anchor">
<a class="anchor__link link" href="#3.5.2" aria-hidden="true">#</a> <span class="number">3.5.2</span> <a class="link" href="https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book-Z-H-24.html#%25_sec_3.5.2">Infinite Streams<span class="nowrap">⁠<svg class="external" width="24" height="24" aria-hidden="true"><use xlink:href="#external"/></svg></span></a>
</h2>
<ul>
<li>With lazy sequences, we can manipulate infinitely long streams!</li>
<li>We can define Fibonacci sequence explicitly with a generator:</li>
</ul>
<pre><code class="blockcode">(<span class="kw">define</span> (fibgen a b) (<span class="kw">cons-stream</span> a (fibgen b (<span class="fu">+</span> a b))))
(<span class="kw">define</span> fibs (fibgen <span class="cn">0</span> <span class="cn">1</span>))</code></pre>
<ul>
<li>As long as we don’t try to display the whole sequence, we will never get stuck in an infinite loop.</li>
<li>We can also create an infinite stream of primes.</li>
</ul>
<h3 id="3.5.2.1" class="anchor">
<a class="anchor__link link" href="#3.5.2.1" aria-hidden="true">#</a> Defining streams implicitly
</h3>
<ul>
<li>Instead of using a generator procedure, we can define infinite streams implicitly, taking advantage of the laziness.</li>
</ul>
<pre><code class="blockcode">(<span class="kw">define</span> fibs
  (<span class="kw">cons-stream</span>
   <span class="cn">0</span>
   (<span class="kw">cons-stream</span> <span class="cn">1</span> (stream-map <span class="fu">+</span> fibs (stream-cdr fibs)))))
(<span class="kw">define</span> pot
  (<span class="kw">cons-stream</span> <span class="cn">1</span> (stream-map (<span class="kw">lambda</span> (x) (<span class="fu">*</span> x <span class="cn">2</span>)) pot)))</code></pre>
<ul>
<li>This implicit technique is known as <em>corecursion</em>. Recursion works backward towards a base case, but corecursion works from the base and creates more data in terms of itself.</li>
</ul>
<aside><h4>Exercises:</h4> <ul class="flat"><li class="flat__item"><a href="../../exercise/3/5.html#ex3.53">3.53</a>, </li><li class="flat__item"><a href="../../exercise/3/5.html#ex3.54">3.54</a>, </li><li class="flat__item"><a href="../../exercise/3/5.html#ex3.55">3.55</a>, </li><li class="flat__item"><a href="../../exercise/3/5.html#ex3.56">3.56</a>, </li><li class="flat__item"><a href="../../exercise/3/5.html#ex3.57">3.57</a>, </li><li class="flat__item"><a href="../../exercise/3/5.html#ex3.58">3.58</a>, </li><li class="flat__item"><a href="../../exercise/3/5.html#ex3.59">3.59</a>, </li><li class="flat__item"><a href="../../exercise/3/5.html#ex3.60">3.60</a>, </li><li class="flat__item"><a href="../../exercise/3/5.html#ex3.61">3.61</a>, </li><li class="flat__item"><a href="../../exercise/3/5.html#ex3.62">3.62</a></li></ul></aside>
<h2 id="3.5.3" class="anchor">
<a class="anchor__link link" href="#3.5.3" aria-hidden="true">#</a> <span class="number">3.5.3</span> <a class="link" href="https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book-Z-H-24.html#%25_sec_3.5.3">Exploiting the Stream Paradigm<span class="nowrap">⁠<svg class="external" width="24" height="24" aria-hidden="true"><use xlink:href="#external"/></svg></span></a>
</h2>
<ul>
<li>Streams can provide many of the benefits of local state and assignment while avoiding some of the theoretical tangles.</li>
<li>Using streams allows us to have different module boundaries.</li>
<li>We can focus on the whole stream/series/signal rather than on individual values.</li>
</ul>
<h3 id="3.5.3.1" class="anchor">
<a class="anchor__link link" href="#3.5.3.1" aria-hidden="true">#</a> Formulating iterations as stream processes
</h3>
<ul>
<li>Before, we made iterative processes by updating state variables in recursive calls.</li>
<li>To compute the square root, we improved a guess until the values didn’t change very much.</li>
<li>We can make a stream that converges on the square root of <code>x</code>, and a stream to approximate <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">π</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span></span></span></span>.</li>
<li>One neat thing we can do with these streams is use sequence accelerators, such as Euler’s transform.</li>
</ul>
<aside><h4>Exercises:</h4> <ul class="flat"><li class="flat__item"><a href="../../exercise/3/5.html#ex3.63">3.63</a>, </li><li class="flat__item"><a href="../../exercise/3/5.html#ex3.64">3.64</a>, </li><li class="flat__item"><a href="../../exercise/3/5.html#ex3.65">3.65</a></li></ul></aside>
<h3 id="3.5.3.2" class="anchor">
<a class="anchor__link link" href="#3.5.3.2" aria-hidden="true">#</a> Infinite streams of pairs
</h3>
<ul>
<li>Previously, we handled traditional nested loops as processes defined on sequences of pairs.</li>
<li>We can find all pairs <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(i,j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span> with <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi><mo>≤</mo><mi>j</mi></mrow><annotation encoding="application/x-tex">i ≤ j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.79549em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span> such that <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi><mo>+</mo><mi>j</mi></mrow><annotation encoding="application/x-tex">i + j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.74285em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span> is prime like this:</li>
</ul>
<pre><code class="blockcode">(stream-filter
 (<span class="kw">lambda</span> (pair) (prime? (<span class="fu">+</span> (<span class="fu">car</span> pair) (<span class="fu">cadr</span> pair))))
 int-pairs)</code></pre>
<ul>
<li>We need some way of producing a stream of all integer pairs.</li>
<li>More generally, we can combined two streams to get a two-dimensional grid of pairs, and we want to reduce this to a one-dimensional stream.</li>
<li>One way to do this is to use <code>interleave</code> in the recursive definition, in order to handle infinite streams.</li>
</ul>
<aside><h4>Exercises:</h4> <ul class="flat"><li class="flat__item"><a href="../../exercise/3/5.html#ex3.66">3.66</a>, </li><li class="flat__item"><a href="../../exercise/3/5.html#ex3.67">3.67</a>, </li><li class="flat__item"><a href="../../exercise/3/5.html#ex3.68">3.68</a>, </li><li class="flat__item"><a href="../../exercise/3/5.html#ex3.69">3.69</a>, </li><li class="flat__item"><a href="../../exercise/3/5.html#ex3.70">3.70</a>, </li><li class="flat__item"><a href="../../exercise/3/5.html#ex3.71">3.71</a>, </li><li class="flat__item"><a href="../../exercise/3/5.html#ex3.72">3.72</a></li></ul></aside>
<h3 id="3.5.3.3" class="anchor">
<a class="anchor__link link" href="#3.5.3.3" aria-hidden="true">#</a> Streams as signals
</h3>
<ul>
<li>We can use streams to model signal-processing systems.</li>
<li>For example, taking the integral of a signal:</li>
</ul>
<pre><code class="blockcode">(<span class="kw">define</span> (integral integrand initial-value dt)
  (<span class="kw">define</span> int
    (<span class="kw">cons-stream</span> initial-value
                 (add-streams (scale-stream integrand dt)
                              int)))
  int)</code></pre>
<aside><h4>Exercises:</h4> <ul class="flat"><li class="flat__item"><a href="../../exercise/3/5.html#ex3.73">3.73</a>, </li><li class="flat__item"><a href="../../exercise/3/5.html#ex3.74">3.74</a>, </li><li class="flat__item"><a href="../../exercise/3/5.html#ex3.75">3.75</a>, </li><li class="flat__item"><a href="../../exercise/3/5.html#ex3.76">3.76</a></li></ul></aside>
<h2 id="3.5.4" class="anchor">
<a class="anchor__link link" href="#3.5.4" aria-hidden="true">#</a> <span class="number">3.5.4</span> <a class="link" href="https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book-Z-H-24.html#%25_sec_3.5.4">Streams and Delayed Evaluation<span class="nowrap">⁠<svg class="external" width="24" height="24" aria-hidden="true"><use xlink:href="#external"/></svg></span></a>
</h2>
<ul>
<li>The use of <code>delay</code> in <code>cons-stream</code> is crucial to defining streams with feedback loops.</li>
<li>However, there are cases where we need further, explicit uses of <code>delay</code>.</li>
<li>For example, solving the differential equation <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>y</mi><mi mathvariant="normal">/</mi><mi>d</mi><mi>t</mi><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">dy/dt = f(y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mord">/</span><span class="mord mathnormal">d</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span> where <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span> is a given function.</li>
<li>The problem here is that <code>y</code> and <code>dy</code> will depend on each other.</li>
<li>To solve this, we need to change <code>integral</code> to take a delayed integrand.</li>
</ul>
<aside><h4>Exercises:</h4> <ul class="flat"><li class="flat__item"><a href="../../exercise/3/5.html#ex3.77">3.77</a>, </li><li class="flat__item"><a href="../../exercise/3/5.html#ex3.78">3.78</a>, </li><li class="flat__item"><a href="../../exercise/3/5.html#ex3.79">3.79</a>, </li><li class="flat__item"><a href="../../exercise/3/5.html#ex3.80">3.80</a></li></ul></aside>
<h3 id="3.5.4.1" class="anchor">
<a class="anchor__link link" href="#3.5.4.1" aria-hidden="true">#</a> Normal-order evaluation
</h3>
<ul>
<li>Explicit use of <code>delay</code> and <code>force</code> is powerful, but makes our programs more complex.</li>
<li>It creates two classes of procedures: normal, and ones that take delayed arguments.</li>
<li>(This is similar to the sync vs. async divide in modern programming languages.)</li>
<li>This forces us to define separate classes of higher-order procedures, unless we make everything delayed, equivalent to normal-order evaluation (like Haskell).</li>
<li>Mutability and delayed evaluation do not mix well.</li>
</ul>
<h2 id="3.5.5" class="anchor">
<a class="anchor__link link" href="#3.5.5" aria-hidden="true">#</a> <span class="number">3.5.5</span> <a class="link" href="https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book-Z-H-24.html#%25_sec_3.5.5">Modularity of Functional Programs and Modularity of Objects<span class="nowrap">⁠<svg class="external" width="24" height="24" aria-hidden="true"><use xlink:href="#external"/></svg></span></a>
</h2>
<ul>
<li>Modularity through encapsulation is a major benefit of introducing assignment.</li>
<li>Stream models can provide equivalent modularity without assignment.</li>
<li>For example, we can reimplement the Monte Carlo simulation with streams.</li>
</ul>
<aside><h4>Exercises:</h4> <ul class="flat"><li class="flat__item"><a href="../../exercise/3/5.html#ex3.81">3.81</a>, </li><li class="flat__item"><a href="../../exercise/3/5.html#ex3.82">3.82</a></li></ul></aside>
<h3 id="3.5.5.1" class="anchor">
<a class="anchor__link link" href="#3.5.5.1" aria-hidden="true">#</a> A functional-programming view of time
</h3>
<ul>
<li>Streams represent time explicitly, decoupling the simulated world from evaluation.</li>
<li>They produce stateful-seeming behavior but avoid all the thorny issues of state.</li>
<li>However, the issues come back when we need to merge streams together.</li>
<li>Immutability is a key pillar of <em>functional programming languages</em>.</li>
</ul>
<div id="q1" class="highlight">
<a class="highlight__link link" href="../highlight.html#3.5-q1" aria-label="view quote in highlights page"><svg class="circle-arrow" width="18" height="18" aria-hidden="true"><use xlink:href="#circle-left"/></svg> Highlights</a>
<blockquote>
<p>We can model the world as a collection of separate, time-bound, interacting objects with state, or we can model the world as a single, timeless, stateless unity. Each view has powerful advantages, but neither view alone is completely satisfactory. A grand unification has yet to emerge. <a class="citation" href="https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book-Z-H-24.html#%25_sec_3.5.5" title="SICP Section 3.5.5">(Section&nbsp;3.5.5)</a></p>
<p>The object model approximates the world by dividing it into separate pieces. The functional model does not modularize along object boundaries. The object model is useful when the unshared state of the “objects” is much larger than the state that they share. An example of a place where the object viewpoint fails is quantum mechanics, where thinking of things as individual particles leads to paradoxes and confusions. Unifying the object view with the functional view may have little to do with programming, but rather with fundamental epistemological issues. <a class="citation" href="https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book-Z-H-24.html#footnote_Temp_507" title="SICP Chapter 3, Footnote 76">(Footnote&nbsp;3.76)</a></p>
</blockquote>
</div>
</main>
<nav class="pagenav pagenav--bottom" aria-label="page">
  <div class="pagenav__item pagenav__item--left">
    <a class="pagenav__link link" href="4.html" aria-label="previous page">
      <svg width="12" height="11" aria-hidden="true"><use xlink:href="#left"/>
      </svg><span class="pagenav__prev">Prev</span>
    </a>
  </div>
  <div class="pagenav__item pagenav__item--center">
    <a class="pagenav__link link" href="index.html" aria-label="parent page">
      <svg width="11" height="12" aria-hidden="true"><use xlink:href="#up"/>
      </svg><span class="pagenav__up">Up</span>
    </a>
  </div>
  <div class="pagenav__item pagenav__item--right">
    <a class="pagenav__link link" href="../4/index.html" aria-label="next page">
      <span class="pagenav__next">Next</span
        ><svg width="12" height="11" aria-hidden="true"
        ><use xlink:href="#right"/></svg>
    </a>
  </div>
</nav>
<footer class="footer">
  <p>© 2021 Mitchell Kember</p>
</footer>
</body>
</html>
