<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Mitchell Kember">
  <title>SICP Section 3.1 Notes</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
   var mathElements = document.getElementsByClassName("math");
   var macros = [];
   for (var i = 0; i < mathElements.length; i++) {
    var texText = mathElements[i].firstChild;
    if (mathElements[i].tagName == "SPAN") {
     katex.render(texText.data, mathElements[i], {
      displayMode: mathElements[i].classList.contains('display'),
      throwOnError: false,
      macros: macros,
      fleqn: false
     });
  }}});
  </script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" />
  <link rel="stylesheet" href="../../assets/style.css">
</head>
<body>
<div hidden>
  <svg>
    <symbol id="up" viewBox="0 0 11 12">
      <path fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" d="M5.5.8v10.4m4.457-5.943L5.5.8 1.043 5.257"/>
    </symbol>
    <symbol id="left" viewBox="0 0 12 11">
      <path fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" d="M.8 5.5h10.4M5.257 9.957L.8 5.5l4.457-4.457">
    </symbol>
    <symbol id="right" viewBox="0 0 12 11">
      <use xlink:href="#left" transform="matrix(-1 0 0 1 12 0)"/>
    </symbol>
    <symbol id="external" viewBox="0 0 24 24">
      <path fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" d="M10.688 5.438H4.125A2.65 2.65 0 001.5 8.063v11.812A2.65 2.65 0 004.125 22.5h11.813a2.65 2.65 0 002.624-2.625v-6.563m-9.187 1.313L22.5 1.5m-6.563 0H22.5v6.563"/>
    </symbol>
    <symbol id="circle-left" viewBox="0 0 18 18" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="9" stroke-width="1.69" transform="matrix(.8889 0 0 .8889 -1.667 -1.667)"/>
      <path stroke-width="1.5" d="M5.229 9h7.542M9 5.229L5.229 9 9 12.771"/>
    </symbol>
  </svg>
</div>
<a class="skip-link" href="#main">Skip to main content</a>
<header class="header">
  <a class="title link" href="../../index.html">SICP Study</a>
  <nav class="sitenav" aria-label="site">
    <a class="sitenav__item sitenav__item--active link"
        href="../../text/index.html" aria-label="textbook notes">Text</a>
    <a class="sitenav__item link"
        href="../../lecture/index.html" aria-label="lecture notes">Lecture</a>
    <a class="sitenav__item link"
        href="../../exercise/index.html" aria-label="exercises">Exercise</a>
    <a class="sitenav__item sitenav__item--last link"
        href="https://github.com/mk12/sicp" aria-label="GitHub repository">
      Source
      <svg alt="" class="github-mark" width="25" height="25" viewBox="0 0 136 133">
        <path fill="currentColor" d="M67.866.002C30.387.002 0 30.39 0 67.877c0 29.988 19.446 55.425 46.417 64.404 3.396.621 4.633-1.475 4.633-3.275 0-1.608-.058-5.879-.091-11.541-18.88 4.1-22.863-9.1-22.863-9.1-3.087-7.838-7.537-9.925-7.537-9.925-6.163-4.213.466-4.13.466-4.13 6.813.484 10.396 6.996 10.396 6.996 6.054 10.371 15.888 7.375 19.754 5.642.617-4.387 2.367-7.38 4.309-9.075-15.071-1.712-30.917-7.537-30.917-33.546 0-7.408 2.646-13.466 6.988-18.212-.7-1.717-3.03-8.617.662-17.963 0 0 5.7-1.825 18.667 6.959 5.412-1.505 11.22-2.259 16.992-2.284 5.762.025 11.57.78 16.991 2.284 12.959-8.784 18.646-6.959 18.646-6.959 3.704 9.346 1.375 16.246.675 17.963 4.35 4.746 6.98 10.804 6.98 18.212 0 26.075-15.872 31.813-30.992 33.492 2.437 2.096 4.608 6.237 4.608 12.57 0 9.072-.083 16.392-.083 18.617 0 1.817 1.22 3.93 4.666 3.267 26.95-8.996 46.38-34.417 46.38-64.396 0-37.487-30.392-67.875-67.88-67.875"/>
      </svg>      
    </a>
  </nav>
</header>
<nav class="pagenav pagenav--top" aria-label="page">
  <div class="pagenav__item pagenav__item--left">
    <a class="pagenav__link link" href="index.html" aria-label="previous page">
      <svg alt="" width="12" height="11"><use xlink:href="#left"/>
      </svg><span class="pagenav__prev">Prev</span>
    </a>
  </div>
  <div class="pagenav__item pagenav__item--center">
    <a class="pagenav__link link" href="index.html" aria-label="parent page">
      <svg alt="" width="11" height="12"><use xlink:href="#up"/>
      </svg><span class="pagenav__up">Up</span>
    </a>
  </div>
  <div class="pagenav__item pagenav__item--right">
    <a class="pagenav__link link" href="2.html" aria-label="next page">
      <span class="pagenav__next">Next</span
        ><svg alt="" width="12" height="11"><use xlink:href="#right"/></svg>
    </a>
  </div>
</nav>
<main id="main">
<article>
<h1>
<span class="number">3.1</span> <a class="link" href="https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book-Z-H-20.html">Assignment and Local State<span class="nowrap">﻿<svg alt="" class="external" width="24" height="24"><use xlink:href="#external"/></svg></span></a>
</h1>
<ul>
<li>The world is populated by independent objects possessing changing state.</li>
<li>An object “has state”: its behaviour is influenced by history.</li>
<li>A bank account is an example of a stateful object.</li>
<li>An object’s state can be characterized by <em>state variables</em>.</li>
<li>We need an <em>assignment operator</em> to change the value associated with a name representing a local variable of an object.</li>
</ul>
<h2 id="3.1.1" class="anchor">
<a class="anchor__link link" href="#3.1.1" aria-hidden="true">#</a> <span class="number">3.1.1</span> <a class="link" href="https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book-Z-H-20.html#%_sec_3.1.1">Local State Variables<span class="nowrap">﻿<svg alt="" class="external" width="24" height="24"><use xlink:href="#external"/></svg></span></a>
</h2>
<ul>
<li>Let’s model the situation of withdrawing from a bank account.</li>
<li>The <code class="sourceCode scheme">withdraw</code> procedure should accept an amount of money as an argument and return the balance after the withdrawal.</li>
<li>If you try to withdraw too much, it should return the string “Insufficient funds”.</li>
<li>Suppose we begin with $100:</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>(withdraw <span class="cn">25</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="cn">75</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>(withdraw <span class="cn">25</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="cn">50</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>(withdraw <span class="cn">60</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="cn">&quot;Insufficient funds&quot;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>(withdraw <span class="cn">15</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="cn">35</span></span></code></pre></div>
<ul>
<li>Evaluating the same combination twice, <code class="sourceCode scheme">(withdraw <span class="cn">25</span>)</code>, returned different values.</li>
<li>We have lost referential transparency. This is a new kind of behaviour of a procedure. Until now, the returned value depended only on the arguments, like a mathematical function.</li>
<li>To implement <code class="sourceCode scheme">withdraw</code>, we define a variable called <code class="sourceCode scheme">balance</code>:</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">define</span> balance <span class="cn">100</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>(<span class="kw">define</span> (withdraw amount)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">if</span> (<span class="fu">&gt;=</span> balance amount)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>      (<span class="kw">begin</span> (<span class="kw">set!</span> balance (<span class="fu">-</span> balance amount))</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>             balance)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>      <span class="cn">&quot;Insufficient funds&quot;</span>))</span></code></pre></div>
<ul>
<li>This uses the <code class="sourceCode scheme"><span class="kw">set!</span></code> special form, whose syntax is <code class="sourceCode scheme">(<span class="kw">set!</span> <span class="sc">«</span><span class="ss">name</span><span class="sc">»</span> <span class="sc">«</span><span class="ss">new-value</span><span class="sc">»</span>)</code>.</li>
<li>Procedures names that end with a bang change the values of variables or of data structures.</li>
<li>The expression <code class="sourceCode scheme">(<span class="kw">begin</span> <span class="sc">«</span><span class="ss">exp1</span><span class="sc">»</span> <span class="sc">«</span><span class="ss">exp2</span><span class="sc">»</span> ... <span class="sc">«</span><span class="ss">expk</span><span class="sc">»</span>)</code> evaluates all the expressions in sequence and returns the value of the last.</li>
<li>We made <code class="sourceCode scheme">balance</code> a global variable. It is much better to have it <em>encapsulated</em> within <code class="sourceCode scheme">withdraw</code>, like so:</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">define</span> withdraw</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">let</span> ((balance <span class="cn">100</span>))</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">lambda</span> (amount)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>      (<span class="kw">if</span> (<span class="fu">&gt;=</span> balance amount)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>          (<span class="kw">begin</span> (<span class="kw">set!</span> balance (<span class="fu">-</span> balance amount))</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>                 balance)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>          <span class="cn">&quot;Insufficient funds&quot;</span>))))</span></code></pre></div>
<ul>
<li>Unfortunately, the substitution model of evaluation is no longer adequate once we have assignment in our procedures.</li>
<li>For now, we technically have no way to understand how these procedures work. We will develop a new model soon.</li>
<li>The following procedure creates “withdraw processors”:</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">define</span> (make-withdraw balance)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">lambda</span> (amount)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">if</span> (<span class="fu">&gt;=</span> balance amount)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>        (<span class="kw">begin</span> (<span class="kw">set!</span> balance (<span class="fu">-</span> balance amount))</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>               balance)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>        <span class="cn">&quot;Insufficient funds&quot;</span>)))</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>(<span class="kw">define</span> W1 (make-withdraw <span class="cn">100</span>))</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>(<span class="kw">define</span> W2 (make-withdraw <span class="cn">100</span>))</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>(W1 <span class="cn">50</span>)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="cn">50</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>(W2 <span class="cn">70</span>)</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="cn">30</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>(W2 <span class="cn">40</span>)</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="cn">&quot;Insufficient funds&quot;</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>(W1 <span class="cn">40</span>)</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="cn">10</span></span></code></pre></div>
<ul>
<li>Here, <code class="sourceCode scheme">W1</code> and <code class="sourceCode scheme">W2</code> are complement independent objects, each with its own local state variable.</li>
<li>We can create a “bank-account object” that responds to multiple messages, all operating on the same local state:</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">define</span> (make-account balance)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">define</span> (withdraw amount)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">if</span> (<span class="fu">&gt;=</span> balance amount)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>        (<span class="kw">begin</span> (<span class="kw">set!</span> balance (<span class="fu">-</span> balance amount))</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>               balance)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>        <span class="cn">&quot;Insufficient funds&quot;</span>))</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">define</span> (deposit amount)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">set!</span> balance (<span class="fu">+</span> balance amount))</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    balance)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">define</span> (dispatch m)</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">cond</span> ((<span class="fu">eq?</span> m <span class="cn">&#39;withdraw</span>) withdraw)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>          ((<span class="fu">eq?</span> m <span class="cn">&#39;deposit</span>) deposit)</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>          (<span class="kw">else</span> (<span class="fu">error</span> <span class="cn">&quot;Unknown request: MAKE-ACCOUNT&quot;</span> m))))</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  dispatch)</span></code></pre></div>
<h2 id="3.1.2" class="anchor">
<a class="anchor__link link" href="#3.1.2" aria-hidden="true">#</a> <span class="number">3.1.2</span> <a class="link" href="https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book-Z-H-20.html#%_sec_3.1.2">The Benefits of Introducing Assignment<span class="nowrap">﻿<svg alt="" class="external" width="24" height="24"><use xlink:href="#external"/></svg></span></a>
</h2>
<ul>
<li>Introducing assignment “leads us into a thicket of difficult conceptual issues” (305).</li>
<li>Even so, it gives us a powerful technique for maintaining modular design.</li>
<li>Consider the procedure <code class="sourceCode scheme">rand</code>. We want it to return an integer chosen at random each time we evaluate <code class="sourceCode scheme">(rand)</code>.</li>
<li>Suppose we have the procedure <code class="sourceCode scheme">rand-update</code> that takes one argument.
<ul>
<li>We first call it with an initial value <span class="math inline">x_1</span>, and it returns an integer <span class="math inline">x_2</span>.</li>
<li>We call it with <span class="math inline">x_2</span>, and it gives us <span class="math inline">x_3</span>, and so on.</li>
<li>The sequence of values <span class="math inline">x_1, x_2, \dots, x_n</span> will have the desired statistical properties (random uniform distribution).</li>
<li>This is a <em>pseudorandom</em> sequence, since each number is a function of the previous one.</li>
</ul></li>
<li>We could implement <code class="sourceCode scheme">rand</code> like this:</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">define</span> rand</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">let</span> ((x random-init))</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">lambda</span> ()</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>      (<span class="kw">set!</span> x (rand-update x))</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>      x)))</span></code></pre></div>
<blockquote>
<p>The Monte Carlo method consists of choosing sample experiments at random from a large set and then making deductions on the basis of the probabilities estimated from tabulating the results of those experiments. (306–307)</p>
</blockquote>
<ul>
<li>We can use the Monte Carlo method to approximate <span class="math inline">π</span>, knowing that the probability that two randomly chosen integers have 1 as their GCD is <span class="math inline">6/π^2</span>.</li>
<li>If we had to use <code class="sourceCode scheme">rand-update</code> directly, our Monte Carlo program would “betray some painful breaches of modularity” (308).</li>
</ul>
<blockquote>
<p>The general phenomenon illustrated by the Monte Carlo example is this: From the point of view of one part of a complex process, the other parts appear to change with time. They have hidden time-varying local state. If we wish to write computer programs whose structure reflects this decomposition, we make computational objects (such as bank accounts and random-number generators) whose behaviour changes with time. We model state with local state variables, and we model the changes of state with assignments to those variables. (309)</p>
</blockquote>
<h2 id="3.1.3" class="anchor">
<a class="anchor__link link" href="#3.1.3" aria-hidden="true">#</a> <span class="number">3.1.3</span> <a class="link" href="https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book-Z-H-20.html#%_sec_3.1.3">The Costs of Introducing Assignment<span class="nowrap">﻿<svg alt="" class="external" width="24" height="24"><use xlink:href="#external"/></svg></span></a>
</h2>
<ul>
<li>The advantages of local state and assignment come at a price.</li>
<li>The substitution model of procedure application is no longer sufficient to properly interpret out programs.</li>
<li>Programming without the use of assignment, as we have done in the first two chapters, is called <em>functional programming</em>.</li>
<li>Observe what happens when we try using the substitution model:</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">define</span> (make-simplified-withdraw balance)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">lambda</span> (amount)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">set!</span> balance (<span class="fu">-</span> balance amount))</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    balance))</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>((make-simplified-withdraw <span class="cn">25</span>) <span class="cn">20</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>((<span class="kw">lambda</span> (amount) (<span class="kw">set!</span> balance (<span class="fu">-</span> <span class="cn">25</span> amount)) <span class="cn">25</span>) <span class="cn">20</span>)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>(<span class="kw">set!</span> balance (<span class="fu">-</span> <span class="cn">25</span> <span class="cn">20</span>)) <span class="cn">25</span></span></code></pre></div>
<ul>
<li>Adhering to the substitution model, we set <code class="sourceCode scheme">balance</code> to 5 and then return 25 as the value of the expression.</li>
<li>This is wrong. We shouldn’t have substituted 25 for <code class="sourceCode scheme">balance</code> everywhere, because the assignment changed it.</li>
<li>Before, a variable was simply a name for a value.</li>
<li>Now, since a variable can change, it somehow refers to a place where a value can be stored, and this value can be changed.</li>
</ul>
<h3 id="3.1.3.1" class="anchor">
<a class="anchor__link link" href="#3.1.3.1" aria-hidden="true">#</a> Sameness and change
</h3>
<ul>
<li>By introducing change into our computational models, many previously straightforward notions become problematic.</li>
<li>Consider the concept of two things being “the same.”</li>
<li>If we have <code class="sourceCode scheme">(make-withdraw <span class="cn">25</span>)</code> and <code class="sourceCode scheme">(make-withdraw <span class="cn">25</span>)</code>, are they the same? No, because they can have different local state.</li>
<li>A language that supports “equals can be substituted for equals” is <em>referentially transparent</em>. <code class="sourceCode scheme"><span class="kw">set!</span></code> violates this.</li>
<li>Reasoning about programs that use assignment is much more difficult for this reason.</li>
<li>The concepts of “sameness” and “change” chase each other around in circles; it is hard to formally define them.</li>
<li>If we have <code class="sourceCode scheme">(<span class="kw">define</span> peter-acc (make-account <span class="cn">100</span>))</code>, there is a big difference between defining <code class="sourceCode scheme">paul-acc</code> in the same way and defining it with <code class="sourceCode scheme">(<span class="kw">define</span> paul-acc peter-acc)</code>.</li>
<li>In the first case, they have distinct accounts. In the second, both refer to the same account—this is called <em>aliasing</em>.</li>
<li>As long as we never modify objects, we can regard them to be precisely the totality of their pieces.</li>
<li>This is no longer valid in the presence of change, because “identity” is something different from the pieces.</li>
<li>A bank account is still “the same” account after a withdrawal. Conversely, two distinct accounts with the same balance are “different.”</li>
<li>The name is attached to an identity rather than the data itself.</li>
</ul>
<h3 id="3.1.3.2" class="anchor">
<a class="anchor__link link" href="#3.1.3.2" aria-hidden="true">#</a> Pitfalls of imperative programming
</h3>
<ul>
<li>Programming that makes extensive use of assignment is called <em>imperative programming</em>.</li>
<li>Imperative programs are susceptible to bugs that cannot occur in functional programs.</li>
<li>Things get even worse when we throw concurrency into the mix.</li>
</ul>
<div id="q1" class="highlight">
<a class="highlight__link link" href="../highlight.html#3.1-q1" aria-label="view quote in highlights page"><svg alt="" class="circle-arrow" width="18" height="18"><use xlink:href="#circle-left"/></svg> Highlights</a>
<blockquote>
<p>In general, programming with assignment forces us to carefully consider the relative orders of the assignments to make sure that each statement is using the correct version of the variables that have been changed. This issue simply does not arise in functional programs.</p>
<p>In view of this, it is ironic that introductory programming is most often taught in a highly imperative style. This may be a vestige of a belief, common throughout the 1960s and 1970s, that programs that call procedures must inherently be less efficient than programs that perform assignments. […] Alternatively it may reflect a view that step-by-step assignment is easier for beginners to visualize than procedure call. Whatever the reason, it often saddles beginning programmers with “should I set this variable before or after that one” concerns that can complicate programming and obscure the important ideas. <span class="citation" data-cites="sicp">[@sicp 3.1.3]</span></p>
</blockquote>
</div>
<!-- https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book-Z-H-20.html#footnote_Temp_339 -->
<!-- footnote only for second; maybe two citations within quote, first one just @sicp 3.1.3, second the footnote? -->
</article>
</main>
<nav class="pagenav pagenav--bottom" aria-label="page">
  <div class="pagenav__item pagenav__item--left">
    <a class="pagenav__link link" href="index.html" aria-label="previous page">
      <svg alt="" width="12" height="11"><use xlink:href="#left"/>
      </svg><span class="pagenav__prev">Prev</span>
    </a>
  </div>
  <div class="pagenav__item pagenav__item--center">
    <a class="pagenav__link link" href="index.html" aria-label="parent page">
      <svg alt="" width="11" height="12"><use xlink:href="#up"/>
      </svg><span class="pagenav__up">Up</span>
    </a>
  </div>
  <div class="pagenav__item pagenav__item--right">
    <a class="pagenav__link link" href="2.html" aria-label="next page">
      <span class="pagenav__next">Next</span
        ><svg alt="" width="12" height="11"><use xlink:href="#right"/></svg>
    </a>
  </div>
</nav>
<footer class="footer">
  <p>© 2020 Mitchell Kember</p>
</footer>
</body>
</html>
